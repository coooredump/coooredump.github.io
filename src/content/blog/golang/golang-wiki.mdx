---
title: Golang ç¼–ç¨‹æŒ‡å—
description: "ç›®å‰å­—èŠ‚è·³åŠ¨å·²å…¨é¢æ‹¥æŠ± Go è¯­è¨€ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œå“”å“©å“”å“©ã€ä¸ƒç‰›äº‘ã€è…¾è®¯ã€ç™¾åº¦ã€ç¾å›¢ã€Facebookã€Googleã€Twitterã€æ»´æ»´ã€æ·±ä¿¡æœã€çŸ¥ä¹ã€å»å“ªå„¿ã€360ã€å¾®åšç­‰å…¬å¸ä¹Ÿåœ¨å¤§é‡ä½¿ç”¨ Go è¯­è¨€ã€‚"
publishDate: 2022-05-14
updateDate: 2025-11-03
tags: [golang]
heroImage: { src: ../_img/202501202213131.jpg }
language: Chinese
comment: true
---

æœ¬æ–‡ä¸­çš„æºç åœ°å€ï¼šhttps://github.com/wangkechun/go-by-example

> å­¦ä¹ ç›®å½•

![](https://cdn.jsdelivr.net/gh/Wu-yikun/OSS/PicGo/202501202228870.jpg)

## 1. Go ç®€ä»‹

ä»‹ç»ä¸‹ Go è¯­è¨€çš„ç‰¹æ€§ä»¥åŠç›®å‰ Go è¯­è¨€åœ¨å¸‚åœºä¸Šçš„ "å¸ä½"ã€‚

### 1.1 Go è¯­è¨€ç‰¹æ€§

1. é«˜æ€§èƒ½ & é«˜å¹¶å‘ï¼šGo è¯­è¨€å¤©ç”Ÿæ”¯æŒé«˜å¹¶å‘ï¼ˆ**goroutine & channel & è°ƒåº¦å™¨**ï¼‰ï¼Œä¸åƒå¾ˆå¤šè¯­è¨€é€šè¿‡åº“çš„å½¢å¼æ”¯æŒï¼›Go åƒä¸€äº›ä½çº§åˆ«çš„è¯­è¨€ (C/C++) ä¸€æ ·æ˜¯ä¸€é—¨**ç¼–è¯‘å‹è¯­è¨€**ï¼Œè¿™æ„å‘³ç€å®ƒçš„æ€§èƒ½è¶³ä»¥åª²ç¾ C/C++ï¼
2. è¯­æ³•ç®€æ´æ˜“æ‡‚ï¼šè¯­æ³•ç±»ä¼¼ C è¯­è¨€ï¼Œæ¯”å¦‚ï¼šåŒæ—¶å»æ‰äº†ä¸éœ€è¦çš„ `()`ï¼Œå¾ªç¯ä¹Ÿåªç®€åŒ–æˆ `for` å¾ªç¯è¿™ä¸€ç§è¡¨ç¤º... è¯¥ç‰¹ç‚¹ä½¿å¾—ç”¨ Go ç¼–å†™çš„ä»£ç æ˜“äºç»´æŠ¤ã€‚
3. ä¸°å¯Œçš„æ ‡å‡†åº“ï¼šGo è¯­è¨€å¸¦æœ‰æå…¶ä¸°å¯Œä¸å®Œå–„çš„æ ‡å‡†åº“ï¼Œ**æ— éœ€å†å€ŸåŠ©ç¬¬ä¸‰æ–¹åº“å®Œæˆä¾¿å¯ä»¥åº”å¯¹æ—¥å¸¸çš„å¼€å‘**ï¼Œè€Œä¸”èƒ½æŒç»­äº«å—åˆ°è¯­è¨€è¿­ä»£å¸¦æ¥çš„æ€§èƒ½ä¼˜åŒ–ã€‚
4. å®Œæ•´çš„å·¥å…·é“¾ï¼šç¼–è¯‘ã€ä»£ç æ ¼å¼åŒ–ã€é”™è¯¯æ£€æŸ¥ã€åŒ…ç®¡ç†ã€ä»£ç è¡¥å…¨ç­‰éƒ½æœ‰ç›¸åº”çš„å·¥å…·ï¼ŒGo è¯­è¨€è¿˜**å†…ç½®äº†å•å…ƒæµ‹è¯•æ¡†æ¶**ï¼ˆå•å…ƒæµ‹è¯•ã€æ€§èƒ½æµ‹è¯•ã€ä»£ç è¦†ç›–ç‡ã€æ€§èƒ½ä¼˜åŒ–ï¼‰ã€‚
5. é™æ€é“¾æ¥ï¼šæ‰€æœ‰çš„ç¼–è¯‘ç»“æœé»˜è®¤éƒ½æ˜¯é™æ€é“¾æ¥çš„ï¼Œ**åªéœ€è¦æ‹·è´ç¼–è¯‘åå”¯ä¸€çš„å¯æ‰§è¡Œæ–‡ä»¶å³å¯éƒ¨ç½²è¿è¡Œ**ï¼Œçº¿ä¸Šå‘å¸ƒçš„ä½“ç§¯å¯ä»¥æ§åˆ¶å¾—å¾ˆå°ã€‚
6. å¿«é€Ÿç¼–è¯‘ï¼šGo è¯­è¨€ä¸€å¼€å§‹è®¾è®¡å°±è€ƒè™‘åˆ°å¿«é€Ÿç¼–è¯‘ã€‚å®ƒèƒ½åƒå…¶ä»–è§£é‡Šå‹è¯­è¨€ä¸€æ ·ï¼ˆPython & JavaScriptï¼‰ï¼Œä½ ä¸ä¼šæ³¨æ„å®ƒæ­£åœ¨ç¼–è¯‘ã€‚
7. è·¨å¹³å°ï¼šGo è¯­è¨€èƒ½åœ¨ Linuxã€MacOSã€Windows ç­‰æ“ä½œç³»ç»Ÿä¸‹è¿è¡Œï¼Œè¿˜èƒ½ç”¨äºå¼€å‘ Androidã€iOS è½¯ä»¶ï¼Œç”šè‡³èƒ½è¿è¡Œåœ¨è·¯ç”±å™¨ã€æ ‘è“æ´¾ç­‰ç­‰è®¾å¤‡ï¼›åŒæ—¶å…·å¤‡[äº¤å‰ç¼–è¯‘](https://zh.wikipedia.org/wiki/%E4%BA%A4%E5%8F%89%E7%B7%A8%E8%AD%AF%E5%99%A8)ç‰¹æ€§ã€‚
8. åƒåœ¾å›æ”¶ï¼šGo æ— éœ€è€ƒè™‘å†…å­˜çš„åˆ†é…ä¸é‡Šæ”¾ï¼Œå› ä¸ºå…¶å†…å­˜ç”± Go è‡ªèº«è¿›è¡Œç®¡ç†ï¼Œä¸åŒäº C/C++ï¼Œå’Œ Java ç±»ä¼¼ã€‚

> ç®€æ´çš„ Go è¯­æ³•

![](https://cdn.jsdelivr.net/gh/Wu-yikun/OSS/PicGo/202501202236896.jpeg)

### 1.2 æ‹¥æŠ± Go è¯­è¨€

ç›®å‰å­—èŠ‚è·³åŠ¨å·²å…¨é¢æ‹¥æŠ± Go è¯­è¨€ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå“”å“©å“”å“©ã€ä¸ƒç‰›äº‘ã€è…¾è®¯ã€ç™¾åº¦ã€ç¾å›¢ã€Facebookã€Googleã€Twitterã€æ»´æ»´ã€æ·±ä¿¡æœã€çŸ¥ä¹ã€å»å“ªå„¿ã€360ã€å¾®åšç­‰å…¬å¸ä¹Ÿåœ¨å¤§é‡ä½¿ç”¨ Go è¯­è¨€ã€‚

![](https://tva4.sinaimg.cn/large/006V2BYXly1h2g4d47r4lj31780hegtu.jpg)

![](https://cdn.jsdelivr.net/gh/Wu-yikun/OSS/PicGo/202501202236553.jpeg)

Go è¯­è¨€åœ¨äº‘è®¡ç®—ã€å¾®æœåŠ¡ã€å¤§æ•°æ®ã€åŒºå—é“¾ã€ç‰©è”ç½‘ç­‰é¢†åŸŸè“¬å‹ƒå‘å±•ï¼ŒDockerã€Kubernetesã€etcd ç­‰å‡ ä¹æ‰€æœ‰çš„äº‘åŸç”Ÿç»„ä»¶å…¨éƒ½æ˜¯ç”¨ Go è¯­è¨€å®ç°ã€‚

## 2. Go å…¥é—¨

ğŸ˜†è¿™éƒ¨åˆ†ç®€å•æ¦‚æ‹¬ä¸‹å¦‚ä½•æ­å»º Go çš„**å¼€å‘ç¯å¢ƒ**ï¼Œæµè§ˆä¸‹ Go è¯­è¨€çš„**åŸºç¡€è¯­æ³• & æ ‡å‡†åº“**ã€‚

### 2.1 æ­å»ºå¼€å‘ç¯å¢ƒ

#### 2.1.1 ä¸‹è½½å®‰è£… Golang

- https://go.dev/ : Golang å®˜ç½‘
- https://studygolang.com/dl : Golang ä¸­å›½é•œåƒï¼ˆGolang å®˜ç½‘æ— æ³•æ‰“å¼€çš„æƒ…å†µå¯ç”¨ï¼‰
- https://goproxy.cn/ : ä¸ƒç‰›äº‘ Go æ¨¡å—ä»£ç†ï¼Œé…ç½® `go mod proxy` å¹¶æŒ‰ç½‘ç«™æç¤ºè¿›è¡Œæ“ä½œå¯åŠ©åŠ›æå‡ä¸‹è½½ç¬¬ä¸‰æ–¹åŒ…çš„é€Ÿåº¦ï¼ˆä¼˜åŒ–è®¿é—® GitHub è¾ƒæ…¢çš„æƒ…å†µï¼‰

#### 2.1.2 é…ç½® Golang IDE

â­é¦–é€‰ç›®å‰å¸‚åœºä¸Šä½¿ç”¨æœ€å¹¿æ³›çš„ä¸¤æ¬¾ IDE : **VSCode** & **GoLand**

- VSCodeï¼šç”±å¾®è½¯å…¬å¸å¼€å‘ï¼Œå…è´¹ã€‚èƒ½è¿è¡Œåœ¨ MacOSã€Windowsã€Linux ä¸Šçš„è·¨å¹³å°å¼€æºä»£ç ç¼–è¾‘å™¨ï¼ˆåŠŸèƒ½é½å…¨çš„ IDEï¼‰ï¼Œéœ€è¦åœ¨æ‰©å±•å¸‚åœºä¸­å®‰è£… Go æ’ä»¶æ‰èƒ½æ”¯æŒ Golang å¼€å‘ã€‚
- GoLandï¼šç”± JetBrains å…¬å¸å¼€å‘ï¼Œä»˜è´¹ (å­¦ç”Ÿå¯ç”³è¯·å…è´¹ä½¿ç”¨)ã€‚

![](https://cdn.jsdelivr.net/gh/Wu-yikun/OSS/PicGo/202501202247867.jpeg)

#### 2.1.3 äº‘ä¸Šå¼€å‘ç¯å¢ƒ

æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨åŸºäº GitHub çš„ [Gitpod](https://gitpod.io/) åœ¨çº¿ç¼–ç¨‹ç¯å¢ƒæ¥ä½¿ç”¨ golangï¼Œåªéœ€åœ¨ä½ çš„å¼€æºä»“åº“ URL çš„ `https://` æ›¿æ¢æˆ `https://gitpod.io/#` å³å¯ã€‚

![](https://cdn.jsdelivr.net/gh/Wu-yikun/OSS/PicGo/202501202248160.jpeg)

### 2.2 åŸºç¡€è¯­æ³• & å¸¸ç”¨æ ‡å‡†åº“

è¿™éƒ¨åˆ†å¼€å§‹æ­£å¼å­¦ä¹  Golang çš„è¯­æ³•ä»¥åŠå¸¸ç”¨æ ‡å‡†åº“çš„ä½¿ç”¨ã€‚

#### 2.2.0 ä» `Hello World` è§è¯ Go ç¨‹åºçš„è¿è¡Œ

```go
package main

import (
    "fmt"
)

func main() {
    fmt.Println("hello world")
}
```

æœ‰ 2 ç§æ–¹å¼è¿è¡Œè¯¥æ®µç¨‹åºï¼š

- `go run` å‘½ä»¤å¯ç›´æ¥è¿è¡Œç¨‹åº
- `go build` å¯å°†ç¨‹åºç¼–è¯‘æˆäºŒè¿›åˆ¶ï¼Œç¼–è¯‘å®Œæˆåç›´æ¥æ‰§è¡Œ `./main` å³å¯è¿è¡Œ

![](https://cdn.jsdelivr.net/gh/Wu-yikun/OSS/PicGo/202501202249292.jpeg)

#### 2.2.1 å˜é‡ & å¸¸é‡

Golang æ˜¯ä¸€é—¨å¼ºç±»å‹è¯­è¨€ï¼ˆæ¯ä¸ªå˜é‡éƒ½æœ‰å…¶å¯¹åº”çš„ç±»å‹ï¼‰ï¼Œå˜é‡ `var` å¦‚æœæ²¡æœ‰æ ‡æ³¨ç±»å‹ä¼šè‡ªåŠ¨æ¨å¯¼ï¼Œå¸¸é‡ `const` é»˜è®¤æ²¡æœ‰ç¡®å®šç±»å‹ï¼ˆè‡ªåŠ¨æ¨å¯¼ï¼‰ã€‚

![](https://cdn.jsdelivr.net/gh/Wu-yikun/OSS/PicGo/202501202249338.jpeg)

> æ³¨æ„ï¼šå¦‚æœå®šä¹‰äº†å˜é‡ï¼Œå¿…é¡»å¾—ä½¿ç”¨ï¼Œå¦åˆ™ç¼–è¯‘ä¸é€šè¿‡

```go
package main

import (
    "fmt"
    "math"
)

// å…¨å±€å˜é‡
var x string = "global" // å¯ä»¥

// x := "global"    // ä¸å¯ä»¥, := ä»…å¯ä»¥åœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨

const (
    A = iota   // iota=0, å€¼ä¸º 0
    B          // iota=1, å€¼ä¸º 1
    C = iota   // iota=2, å€¼ä¸º 2
    D = "test" // iota=3, å€¼ä¸º"test"
    E          // iota=4, å€¼ä¸º"test"
    F = 9      // iota=5, å€¼ä¸º 9
    G          // iota=6, å€¼ä¸º 9
)

func main() {
    /* ------------ å˜é‡ ------------ */
    // å£°æ˜å¹¶èµ‹å€¼
    var a = "æ˜äº†"
    
    // ç±»å‹æ¨å¯¼
    var b = true
    
    // å¤šå˜é‡å®šä¹‰ & ç±»å‹æ¨å¯¼
    var c, d int = 1, 9
    var e, f = 6, "F"
    var (
        g = 666
        h = false
    )
    
    // ç®€çŸ­å®šä¹‰(å¦ä¸€å£°æ˜å˜é‡çš„æ–¹å¼ :=)
    i := 1.9
    
    // ç±»å‹è½¬æ¢: float64=>float32
    j := float32(i)
    
    // å­—ç¬¦ä¸²å¯é€šè¿‡ + æ‹¼æ¥
    k := "æ˜é‡‘" + a
    
    // åŒ¿åå˜é‡ _
    y, _ := 1, 2
    
    // Go æ˜“äºå®ç°ä¸¤æ•°
    c, d = d, c
    
    /* ------------ å¸¸é‡ ------------ */
    const l string = "constant"
    const m = 10
    const n = 2e3 / m
    
    // "global" "æ˜äº†" true 9 1 6 "F" 666 false 1.9 1.9 "æ˜é‡‘æ˜äº†" "constant" 10 200 1
    fmt.Println(x, a, b, c, d, e, f, g, h, i, j, k, l, m, math.Abs(n), y)
    
    // 0 1 2 "test" "test" 9 9
    fmt.Println(A, B, C, D, E, F, G)
}
```

#### 2.2.2 æ•°æ®ç±»å‹ & å ä½ç¬¦

ğŸŒ—Go è¯­è¨€åŸºæœ¬æ•°æ®ç±»å‹è¾ƒå¤šï¼Œä¸»è¦æœ‰ä»¥ä¸‹è¿™äº›ï¼š

- `byte`ã€`int`ã€`int8`ã€`int16`ã€`int32`ã€`int64`ã€`uint`...
- `float32`ã€`float64`
- `error`
- `string`
- `bool`
- `rune`

![](https://cdn.jsdelivr.net/gh/Wu-yikun/OSS/PicGo/202501202249262.jpeg)

ğŸŒ“Go è¯­è¨€å›Šæ‹¬çš„å¤åˆæ•°æ®ç±»å‹èŒƒå›´è¾ƒå¹¿ (ä¸‹æ–‡æ…¢æ…¢ä»‹ç») ï¼š

- æ•°ç»„ `array`
- åˆ‡ç‰‡ `slice`
- å­—å…¸ `map`
- å‡½æ•° `func`
- ç»“æ„ä½“ `struct`
- é€šé“ `channel`
- æ¥å£ `interface`
- æŒ‡é’ˆ `*`

ğŸš€æ ¹æ®æ•°æ®ç‰¹ç‚¹åˆå¯åˆ†ä¸º**å€¼ä¼ é€’** & **å¼•ç”¨ä¼ é€’**ï¼š

- å€¼ä¼ é€’ï¼š`int`ã€`float`ã€`string`ã€`bool`ã€`array`ã€`struct`
- å¼•ç”¨ä¼ é€’ï¼š`slice`ã€`map`ã€`chan`ã€`*`

â­è‡³äº**è¿ç®—ç¬¦**ï¼ˆç®—æ³•è¿ç®—ç¬¦ã€å…³ç³»è¿ç®—ç¬¦ã€é€»è¾‘è¿ç®—ç¬¦ã€ä½è¿ç®—ç¬¦ã€èµ‹å€¼è¿ç®—ç¬¦ï¼‰å’Œå…¶ä»–è¯­è¨€åŸºæœ¬ä¸€è‡´ï¼Œè¿™é‡Œä¸å†èµ˜å™ã€‚

#### 2.2.3 `if-else` æ¡ä»¶åˆ¤æ–­

Go è¯­è¨€ä¸­çš„ `if` åˆ¤æ–­è¯­å¥ä¸éœ€è¦ `()`ï¼›åŒç†ï¼Œ`switch` å’Œ `for` ä¹Ÿä¸éœ€è¦ã€‚

Go è¯­è¨€ä¸­çš„ `if` è¯­å¥å­˜åœ¨ä¸€ç§ç‰¹æ®Šçš„å†™æ³•ï¼š

> `err` æ˜¯ `myFunc()` çš„è¿”å›å€¼ï¼Œæ‰§è¡Œåå†å¯¹ `err==nil` è¯­å¥è¿›è¡Œåˆ¤æ–­ã€‚

![](https://cdn.jsdelivr.net/gh/Wu-yikun/OSS/PicGo/202501202250628.jpeg)

```go
package main

import "fmt"

func main() {
    // Golang çš„ ifã€forã€switch å‡æ— éœ€ ()
    if 5%2 == 0 {
        fmt.Println("5 is even")
    } else {
        fmt.Println("5 is odd")
    }
    
    // ç‰¹æ®Šçš„ if åˆ†æ”¯: if æ‰§è¡Œè¯­å¥; åˆ¤æ–­è¯­å¥ { }
    if num := 9; num < 0 {
        fmt.Println(num, "is negative")
    } else if num < 10 {
        fmt.Println(num, "has 1 digit")
    } else {
        fmt.Println(num, "has multiple digits")
    }
}
```

#### 2.2.4 `for` å¾ªç¯

Go è¯­è¨€ä¸­æ²¡æœ‰ `while`ã€`do while` è¿™ç±»å¾ªç¯ï¼Œä»…ä»…åªæœ‰ `for` è¿™ä¸€ç§å¾ªç¯ã€‚

```go
package main

import "fmt"

func main() {
    // while
    i := 1
    for i <= 3 {
        fmt.Println(i)
        i = i + 1
    }
    
    for j := 7; j < 9; j++ {
        fmt.Println(j)
    }
    
    // æ­»å¾ªç¯
    for {
        fmt.Println("endless loop")
    }
}
```

#### 2.2.5 `switch` åˆ†æ”¯

ç›¸æ¯” C/C++ï¼ŒGo è¯­è¨€çš„ `switch` åˆ†æ”¯**ç•¥æœ‰ä¸åŒ**ï¼Œä¹Ÿæ›´åŠ **å¼ºå¤§**ã€‚

- ä¸åŒä¹‹å¤„ï¼š`case` ä¸­ä¸éœ€è¦å†æ˜¾å¼åŠ  `break`ï¼Œæ‰§è¡Œå®Œå¯¹åº” `case` å°±ä¼šé€€å‡ºï¼Œä¸åƒ C/C++ æ²¡åŠ  `break` ä¼šè·‘å®Œä½™ä¸‹æ‰€æœ‰ `case`ï¼›åŒæ—¶ `switch` åä¹Ÿä¸å†éœ€è¦ `()`ã€‚
- å¼ºå¤§ä¹‹å¤„ï¼šGo è¯­è¨€ä¸­ `switch` åèƒ½è·Ÿä»»æ„å˜é‡ç±»å‹ï¼›ä¹Ÿå¯ä¸è·Ÿä»»ä½•å˜é‡ï¼Œç„¶ååœ¨ `case` ä¸­å†™æ¡ä»¶åˆ†æ”¯ï¼Œè¿™æ ·å°±å°† `switch-case` åˆ†æ”¯ç»“æ„ç®€åŒ–ä¸º `if-else` æ¡ä»¶åˆ¤æ–­ç»“æ„äº†ã€‚

```go
package main

import (
    "fmt"
    "time"
)

func main() {
    
    // switch-case æ ‡å‡†ç»“æ„
    a := 2
    switch a {
    case 1:
        fmt.Println("one")
    case 2:
        fmt.Println("two")	// æ§åˆ¶å°åªè¾“å‡º "two"
    case 3:
        fmt.Println("three")
    case 4, 5:
        fmt.Println("four or five")
    default:
        fmt.Println("other")
    }
    
    // switch åä¸è·Ÿå˜é‡
    t := time.Now()
    switch {
    case t.Hour() < 12:
        fmt.Println("It's before noon")
    default:
        fmt.Println("It's after noon")
    }
}
```

#### 2.2.6 æ•°ç»„ array

æ•°ç»„æ˜¯ä¸€ä¸ªé•¿åº¦å›ºå®šçš„å…ƒç´ åºåˆ—ï¼Œå¯åˆ©ç”¨ç´¢å¼•å–å€¼/å­˜å€¼ã€‚

```go
package main

import "fmt"

func main() {
    // ä¸€ç»´æ•°ç»„
    var a [5]int
    a[4] = 100
    fmt.Println("get:", a[2])   // get: 0
    fmt.Println("len:", len(a)) // len: 5
    
    // 3 ç§æ•°ç»„åˆå§‹åŒ–æ–¹å¼ (1)
    b := [3]int{1, 2, 3} // æˆ– var b = [3]int{1, 2, 3}
    fmt.Println(b)       // [1 2 3]
    
    // 3 ç§æ•°ç»„åˆå§‹åŒ–æ–¹å¼ (2)
    c := [...]int{1, 3, 2} // æˆ– var c = [...]int{1, 2, 3}
    fmt.Println(c)         // [1 3 2]
    
    // 3 ç§æ•°ç»„åˆå§‹åŒ–æ–¹å¼ (3)
    d := [...]int{1: 3, 6: 5} // æˆ– var d = [...]int{1: 3, 6: 5}
    fmt.Println(d)            // [0 3 0 0 0 0 5]
    
    // äºŒç»´æ•°ç»„
    var twoD [2][3]int
    for i := 0; i < 2; i++ {
        for j := 0; j < 3; j++ {
            twoD[i][j] = i + j
        }
    }
    fmt.Println("2d: ", twoD) // [[0 1 2] [1 2 3]]
}
```

ğŸš«ä¸è¿‡åœ¨çœŸå®çš„ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬å¾ˆå°‘ç›´æ¥ä½¿ç”¨å®šé•¿çš„æ•°ç»„ï¼Œæ›´å¤šä½¿ç”¨çš„æ˜¯åˆ‡ç‰‡ã€‚

#### 2.2.7 åˆ‡ç‰‡ slice

æ•°ç»„æ˜¯å®šé•¿çš„ï¼Œæ‰€ä»¥ Go æ¨å‡ºå¯æ‰©å®¹çš„åˆ‡ç‰‡ã€‚ä¸æ•°ç»„ä¸åŒçš„æ˜¯ï¼Œåˆ‡ç‰‡ä¸éœ€è¦æŒ‡å®š `[]` é‡Œçš„é•¿åº¦ã€‚

```go
// 1.å£°æ˜ç©ºåˆ‡ç‰‡
var slice1 []string
// 2.åˆ›å»ºä¸€ä¸ªå¸¦é»˜è®¤é•¿åº¦çš„åˆ‡ç‰‡
var slice2 = make([]int, 3)
// 3.å£°æ˜å¹¶åˆå§‹åŒ–åˆ‡ç‰‡
slice3 := []string{"g", "o", "o", "d"}
// 4.æœ€å¸¸ç”¨åˆ‡ç‰‡åˆ›å»ºæ–¹å¼
slice4 := make([]int, 3)
// 5.åˆ›å»ºå¸¦æœ‰é•¿åº¦å’Œå®¹é‡çš„åˆ‡ç‰‡
slice5 := make([]int, 3, 5)
```

é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨ `make` å‡½æ•°æ¥åˆ›å»ºä¸€ä¸ªåˆ‡ç‰‡ï¼›ä½¿ç”¨ `append` æ¥è¿½åŠ å…ƒç´ ï¼Œæ³¨æ„è¦å°†å…¶ç»“æœèµ‹å€¼ç»™åŸåˆ‡ç‰‡ï¼›ç„¶åå¯ä»¥åƒæ•°ç»„ä¸€æ ·å»å–å€¼ï¼›è¿˜å¯ä»¥é€šè¿‡ `[a:b]` æ¥è·å–åˆ‡ç‰‡ä¸­æŒ‡å®šèŒƒå›´çš„å€¼ã€‚

```go
package main

import "fmt"

func main() {
    // åˆ›å»ºåˆ‡ç‰‡ â€”â€” é•¿åº¦:3; å®¹é‡:5
    s := make([]string, 3, 5)
    s[0] = "a"
    s[1] = "b"
    s[2] = "c"
    fmt.Println("get:", s[2])   // c
    fmt.Println("len:", len(s)) // 3
    fmt.Println("cap:", cap(s)) // 5
    
    // append è¿½åŠ å…ƒç´ 
    s = append(s, "d")
    s = append(s, "e", "f")
    fmt.Println(s) // [a b c d e f]
    
    // copy æ‹·è´å…ƒç´ 
    c := make([]string, len(s))
    copy(c, s)
    fmt.Println(c) // [a b c d e f]
    
    cs := []string{"w", "w", "w", "w", "w"}
    copy(cs, s[:3])
    fmt.Println(cs) // [a b c w w]
    
    // slice åˆ‡ç‰‡å–å€¼æ“ä½œä¹Ÿå¯ä»¥åƒ python ä¸­çš„ä¸€æ ·å–å‡ºæŒ‡å®šèŒƒå›´çš„å…ƒç´ , åªä¸è¿‡ä¸å¯ä»¥æ˜¯è´Ÿæ•°ç´¢å¼•
    fmt.Println(s[2:5]) // [c d e]
    fmt.Println(s[:5])  // [a b c d e]
    fmt.Println(s[2:])  // [c d e f]
    
    // å£°æ˜åˆ‡ç‰‡å¹¶åˆå§‹åŒ–
    good := []string{"g", "o", "o", "d"}
    fmt.Println(good) // [g o o d]
    
    // å°†åˆ‡ç‰‡ c å®Œå…¨æ·»åŠ åˆ°åˆ‡ç‰‡ good ä¸­!
    good = append(good, c...)
    fmt.Println(good) // [g o o d a b c d e f]
}
```

ğŸ¤”**åˆ‡ç‰‡å…ƒç´ çš„åˆ é™¤**ï¼šGo è¯­è¨€ä¸­å¹¶æ²¡æœ‰æä¾›ä¸€ä¸ªå†…ç½®å‡½æ•°å°†åˆ‡ç‰‡ä¸­çš„å…ƒç´ è¿›è¡Œåˆ é™¤ï¼Œä½†æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `[x,y]` æˆ–è€… `append` æ¥å®ç°ã€‚

```go
// åˆ‡ç‰‡å…ƒç´ çš„åˆ é™¤
slice := []int{1, 2, 3, 4, 5}                 // åŸå§‹åˆ‡ç‰‡: [1 2 3 4 5]
slice = slice[1:]                             // åˆ é™¤ç´¢å¼•ä¸º0çš„å…ƒç´ : [2 3 4 5]
idx := 1                                      // ç´¢å¼•å€¼ idx=1
slice = append(slice[:idx], slice[idx+1:]...) // åˆ é™¤ç´¢å¼•ä¸º1çš„å…ƒç´ : [2 4 5]

fmt.Println(slice) // [2 4 5]
```

â­å°ç»“ä¸€ä¸‹ï¼š

- æ¯ä¸€ä¸ªåˆ‡ç‰‡éƒ½å¼•ç”¨äº†ä¸€ä¸ªåº•å±‚æ•°ç»„ã€‚
- åˆ‡ç‰‡åˆ›å»ºæ—¶å­˜å‚¨äº†ä¸€ä¸ªé•¿åº¦å’Œä¸€ä¸ªå®¹é‡ï¼Œè¿˜æœ‰ä¸€ä¸ªæŒ‡å‘æ•°ç»„çš„æŒ‡é’ˆï¼Œå½“åˆ‡ç‰‡æ·»åŠ æ•°æ®æ—¶ï¼Œå¦‚æœæ²¡æœ‰è¶…è¿‡å®¹é‡ï¼Œç›´æ¥æ·»åŠ ï¼Œè¶…å‡ºå®¹é‡è‡ªåŠ¨æ‰©å®¹æˆå€å¢é•¿ã€‚
- ä¸€æ—¦åˆ‡ç‰‡æ‰©å®¹ï¼ŒæŒ‡é’ˆä¼šæŒ‡å‘ä¸€ä¸ªæ–°çš„åº•å±‚æ•°ç»„å†…å­˜åœ°å€ã€‚

#### 2.2.8 å­—å…¸ `map`

`map` æ˜¯ Go è¯­è¨€ä¸­å†…ç½®çš„å­—å…¸ç±»å‹ï¼Œå­˜å‚¨çš„æ˜¯é”®å€¼å¯¹ `key:value` ç±»å‹çš„æ•°æ®ï¼Œæœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š

- map æ˜¯**å®Œå…¨æ— åº**çš„ï¼Œéå†æ—¶ä¸ä¼šæŒ‰ç…§å­—æ¯é¡ºåºæˆ–æ’å…¥é¡ºåºè¾“å‡ºï¼Œè€Œæ˜¯éšæœºçš„ï¼Œä¸”åªèƒ½é€šè¿‡ key è®¿é—®å¯¹åº”çš„ valueã€‚
- ç©ºçš„ slice æ˜¯å¯ä»¥ç›´æ¥ä½¿ç”¨çš„ï¼Œå› ä¸ºå®ƒæœ‰åº•å±‚æ•°ç»„ï¼›ä½†ç©ºçš„ map ä¸èƒ½ç›´æ¥ä½¿ç”¨ï¼Œéœ€è¦å…ˆ `make` æˆ–åˆå§‹åŒ–åæ‰èƒ½ä½¿ç”¨ï¼ˆmap æ˜¯å¼•ç”¨ç±»å‹ï¼Œå¦‚æœå£°æ˜æ²¡æœ‰åˆå§‹åŒ–å€¼ï¼Œé»˜è®¤ä¸º `nil`ï¼Œæ˜¯ä¸èƒ½ç›´æ¥ä½¿ç”¨çš„ï¼‰ã€‚
- map çš„ key ä¸èƒ½é‡å¤ï¼Œå¦åˆ™æ–°å¢åŠ çš„å€¼ä¼šè¦†ç›–åŸæ¥ key å¯¹åº”çš„ valueã€‚

åˆ›å»º `map`ï¼š

```go
// å£°æ˜ç©º map: ä¸å¯ç›´æ¥ä½¿ç”¨
var map1 map[int]string
// åˆ›å»º map (å·²åˆå§‹åŒ–â€”â€”é›¶å€¼å¡«å……): å¯ç›´æ¥ä½¿ç”¨
map2 := make(map[int]string)
// å£°æ˜å¹¶åˆå§‹åŒ– map: å¯ç›´æ¥ä½¿ç”¨
map3 := map[string]int{"one": 1, "two": 2}
```

ä½¿ç”¨ `map`ï¼š

```go
package main

import "fmt"

func main() {
    // make åˆ›å»º map
    m := make(map[string]int)
    m["one"] = 1
    m["two"] = 2
    fmt.Println(m)           // map[one:1 two:2]
    fmt.Println(len(m))      // 2
    fmt.Println(m["one"])    // 1
    fmt.Println(m["unknow"]) // 0
    
    // å¦‚æœ map ä¸ºç©º, ä¸èƒ½ç›´æ¥ä½¿ç”¨, å¦åˆ™æŠ¥é”™ panic: assignment to entry in nil map
    var nilMap map[int]float32
    //nilMap[0] = 1.0     // panic: assignment to entry in nil map
    if nilMap == nil {
        nilMap = make(map[int]float32)
    }
    nilMap[0] = 1.0
    fmt.Println(nilMap) // map[0:1]
    
    // åˆ¤æ–­ key æ˜¯å¦å­˜åœ¨, value,ok := map[key]
    r, ok := m["unknow"]
    fmt.Println(r, ok) // 0 false
    t, ok := m["two"]
    fmt.Println(t, ok) // 2 true
    
    // map ä¸­ä½¿ç”¨ delete åˆ é™¤ key å¯¹åº”çš„é”®å€¼å¯¹
    delete(m, "one")
    delete(m, "two")
    fmt.Println(m) // map[]
    
    // ä¸ä½¿ç”¨ make å‡½æ•°, ç›´æ¥åˆ›å»ºå¹¶åˆå§‹åŒ– map
    m2 := map[string]int{"one": 1, "two": 2}
    var m3 = map[string]int{"one": 1, "two": 2}
    fmt.Println(m2, m3) // map[one:1 two:2] map[one:1 two:2]
}
```

#### 2.2.9 `range` éå†

ä»‹ç»ä¸‹ `range` å…³é”®å­—ï¼šå¯¹äº slice æˆ–è€… mapï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ range å¯¹å…¶è¿›è¡Œå¿«é€Ÿéå†ã€‚

- **slice**ï¼šç¬¬ä¸€ä¸ªæ˜¯ç´¢å¼•ï¼Œç¬¬äºŒä¸ªæ˜¯å€¼
- **map**ï¼šç¬¬ä¸€ä¸ªæ˜¯é”®ï¼Œç¬¬äºŒä¸ªæ˜¯å€¼

å¦‚æœä¸éœ€è¦ç´¢å¼•/é”®ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ `_` åŒ¿åå˜é‡ä»£æ›¿ã€‚

```go
package main

import (
    "fmt"
    "strconv"
)

func main() {
    // slice â€”â€” range
    nums := []int{2, 3, 4}
    sum := 0
    for i, num := range nums {
        sum += num
        if num == 2 {
            fmt.Println("index:", i, "num:", num) // index: 0 num: 2
        }
    }
    fmt.Println(sum) // 9
    // å¦‚è‹¥ä¸éœ€è¦ç´¢å¼•, å¯ä½¿ç”¨ _ åŒ¿åå˜é‡
    for _, num := range nums {
        fmt.Println(num)
    }
    
    // map â€”â€” range
    maps := make(map[int]string)
    maps[0] = "hello"
    maps[1] = "world"
    for key, value := range maps {
        // int è½¬ string(1): fmt.Sprintf("%d", intVal)
        fmt.Println(fmt.Sprintf("%d", key) + ":" + value)
        // int è½¬ string(2): strconv.Itoa(intVal)
        fmt.Println(strconv.Itoa(key) + ":" + value)
        // int è½¬ string(3): , åˆ†éš”
        fmt.Println(key, ":", value)
    }
    // å¦‚è‹¥ä¸éœ€è¦é”®, å¯ä½¿ç”¨ _ åŒ¿åå˜é‡
    for _, v := range maps {
        fmt.Println("v", v)
    }
    // å¦‚è‹¥ä¸éœ€è¦å€¼, å¯ä½¿ç”¨ _ åŒ¿åå˜é‡, ä¹Ÿå¯ä»¥ç›´æ¥çœç•¥
    for k := range maps {
        fmt.Println("key", k)
    }
}
```

#### 2.2.10 å‡½æ•° `func`

ğŸ’–Go è¯­è¨€ä¸­çš„å‡½æ•°æ¯”è¾ƒç‰¹æ®Šï¼Œå‚æ•°ç±»å‹ã€è¿”å›å€¼ç±»å‹éƒ½æ˜¯**åç½®**çš„ï¼Œè€Œä¸”å‡½æ•°é¦–å­—æ¯å¤§å†™/å°å†™çš„ä½œç”¨ä¸åŒï¼š

- å¦‚æœ**å‡½æ•°åé¦–å­—æ¯å¤§å†™**åˆ™è¡¨ç¤º**å…¬å…±å‡½æ•°**ï¼Œå…¶ä»–åŒ…èƒ½å¤Ÿè°ƒç”¨ï¼Œå‰æå¾—å¼•å…¥å½“å‰åŒ…ã€‚
- å¦‚æœ**å‡½æ•°åé¦–å­—æ¯å°å†™**åˆ™è¡¨ç¤º**ç§æœ‰å‡½æ•°**ï¼Œä»…èƒ½å¤Ÿåœ¨æœ¬åŒ…ä¸­è°ƒç”¨ã€‚

> Go è¯­è¨€çš„å‡½æ•° `func` ç»“æ„

![](https://cdn.jsdelivr.net/gh/Wu-yikun/OSS/PicGo/202501202250949.jpeg)

ğŸ’–Golang ä¸­çš„**å‡½æ•°åŸç”Ÿæ”¯æŒè¿”å›å¤šä¸ªå€¼**ï¼Œä¸”åœ¨å®é™…ä¸šåŠ¡åœºæ™¯ä¸­éƒ½è¿”å›ä¸¤ä¸ªå€¼ï¼Œç¬¬ä¸€ä¸ªæ˜¯çœŸæ­£çš„è¿”å›ç»“æœï¼Œç¬¬äºŒä¸ªæ˜¯é”™è¯¯ä¿¡æ¯ã€‚

> å¤šè¿”å›å€¼

![](https://cdn.jsdelivr.net/gh/Wu-yikun/OSS/PicGo/202501202250693.jpeg)

æ¥ä¸‹æ¥çœ‹çœ‹å‡½æ•°çš„åŸºæœ¬å®šä¹‰åŠå…¶ç”¨æ³•ï¼š

```go
package main

import "fmt"

func add(a int, b int) (int, string) {
    return a + b, "ok"
}

func add2(a, b int) int {
    return a + b
}

func exists(m map[string]string, k string) (v string, ok bool) {
    v, ok = m[k]
    return v, ok
}

func main() {
    res, _ := add(1, 2)
    fmt.Println(res) // 3
    
    v, ok := exists(map[string]string{"a": "A"}, "a")
    fmt.Println(v, ok) // A True
}
```

ğŸ’–Go è¯­è¨€ä¸­çš„å‡½æ•°ä¹Ÿæ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œä¹Ÿå¯ä»¥è¢«å­˜å‚¨åœ¨ä¸€ä¸ªå˜é‡ä¸­ï¼Œè°ƒç”¨å˜é‡çš„æ—¶å€™ä¹Ÿå°±ç›¸å½“äºè°ƒç”¨å‡½æ•°â€”â€”ä¹Ÿå°±æ˜¯å¯ä»¥**å°†å‡½æ•°ä½œä¸ºä¼ é€’å‚æ•°**ã€‚

```go
package main

import "fmt"

func add(a int, b int) (int, string) {
    return a + b, "ok"
}

func main() {
    // å‡½æ•°ä½œä¸ºä¼ é€’å‚æ•°
    f := add
    ret, _ := f(2, 3)
    fmt.Println(ret) // 5
    
    // å®šä¹‰å‡½æ•°å˜é‡
    var addingFunc func(int, int) (int, string)
    addingFunc = add
    result, str := addingFunc(1, 5)
    fmt.Println(result, str) // 6 ok
}
```

ğŸ’–Go ä¸­å®šä¹‰åŒ¿åå‡½æ•°åŠ ä¸Š `()` ç›¸å½“äºç›´æ¥è°ƒç”¨ï¼›å¦‚æœæ²¡æœ‰ `()` åˆ™è¡¨ç¤ºå®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œå¯å°†å…¶èµ‹å€¼ç»™å˜é‡ç„¶åè¿›è¡Œå¤šæ¬¡è°ƒç”¨â€”â€”**åŒ¿åå‡½æ•°**ã€‚

```go
package main

import (
    "fmt"
    "strconv"
)

func main() {
    // åŒ¿åå‡½æ•°çš„ç®€å•å®šä¹‰ä¸è°ƒç”¨
    func() {
        fmt.Println("åŒ¿åå‡½æ•°")
    }() // åŒ¿åå‡½æ•°
    
    // åŒ¿åå‡½æ•°çš„ä½¿ç”¨
    sum := func(a int, b int) int {
        return a + b
    }(1, 2)
    fmt.Println(sum) // 3
    
    // å®šä¹‰åŒ¿åå‡½æ•°å¹¶èµ‹å€¼ç»™å…¶ä»–å˜é‡, æ­¤å¤„å¹¶æ²¡æœ‰è°ƒç”¨åŒ¿åå‡½æ•°, å› ä¸ºæ²¡æœ‰()
    myFunc := func(a, b int) string {
        return strconv.Itoa(a) + fmt.Sprintf("%d", b)
    }
    // è°ƒç”¨å®šä¹‰çš„åŒ¿åå‡½æ•°
    returnVal := myFunc(6, 66)
    fmt.Println(returnVal) // 666
}
```

ğŸ’–ç”šè‡³ä½ å¯ä»¥å°†åŒ¿åå‡½æ•°ä½œä¸ºå¦ä¸€ä¸ªå‡½æ•°çš„å‚æ•°/è¿”å›å€¼ï¼›å…¶ä¸­ä½œä¸ºå‚æ•°çš„å‡½æ•°å«åš**å›è°ƒå‡½æ•°**ï¼Œè°ƒç”¨çš„å‡½æ•°å«åš**é«˜é˜¶å‡½æ•°**ã€‚

```go
package main

import "fmt"

// åŒ¿åå‡½æ•°ä½œä¸ºè¿”å›å€¼
func returnFunc(a int, b int) func() int {
    return func() int {
        return a + b
    }
}

func increase(a int, b int) int {
    return a + b
}

func reduce(a int, b int) int {
    return a - b
}

// opera: é«˜é˜¶å‡½æ•°
// f: å›è°ƒå‡½æ•°
func opera(a int, b int, f func(int, int) int) int {
    res := f(a, b)
    return res
}

func main() {
    // å°†åŒ¿åå‡½æ•°ä½œä¸ºå¦ä¸€å‡½æ•°çš„å‚æ•°
    num1 := opera(1, 2, increase) // 3
    num2 := opera(1, 2, reduce)   // -1
    fmt.Println(num1, num2)
    
    // å®šä¹‰åŒ¿åå‡½æ•°ä½œä¸ºå‡½æ•°å‚æ•°
    num3 := opera(3, 4, func(a int, b int) int {
        return a * b
    })
    fmt.Println(num3) // 12
}
```

ğŸ’–æ—¢ç„¶ Go è¯­è¨€ä¸­çš„å‡½æ•°èƒ½ä½œä¸ºè¿”å›å€¼å’Œå‚æ•°ï¼Œè‡ªç„¶èƒ½æ‰“é€ **é—­åŒ…ç»“æ„**ï¼Œä¸ JS é—­åŒ…å«ä¹‰ç›¸åŒã€‚

æ‰€è°“é—­åŒ…ï¼Œå°±æ˜¯ä¸€ä¸ªå¤–å±‚å‡½æ•°ä¸­æœ‰å†…å±‚å‡½æ•°ï¼Œè¿™ä¸ªå†…å±‚å‡½æ•°ä¼šæ“ä½œå¤–å±‚å‡½æ•°çš„å±€éƒ¨å˜é‡ï¼Œå¹¶ä¸”ï¼Œå¤–å±‚å‡½æ•°æŠŠå†…å±‚å‡½æ•°ä½œä¸ºè¿”å›å€¼ï¼Œå°†å†…å±‚å‡½æ•°ä¸å¤–å±‚å‡½æ•°ä¸­çš„å±€éƒ¨å˜é‡ç»Ÿç§°ä¸ºé—­åŒ…ç»“æ„ã€‚

![](https://cdn.jsdelivr.net/gh/Wu-yikun/OSS/PicGo/202501202251102.jpeg)

![](https://cdn.jsdelivr.net/gh/Wu-yikun/OSS/PicGo/202501202251525.jpeg)

ğŸ’–å…ˆæ‹æ¸…ä¸‹ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦é—­åŒ…ç»“æ„ï¼Œé—­åŒ…æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ

é¦–å…ˆçœ‹ä¸€ä¸ªç®€å•çš„è®¡æ•°å™¨ä¾‹å­ï¼

```go
package main

import "fmt"

var counter = 0

func add() int {
    counter++
    return counter
}

func main() {
    add()
    add()
    add()
    fmt.Println(counter) // 3
}
```

è™½ç„¶æˆ‘ä»¬å·²ç»è¾¾åˆ°äº†ç›®çš„ï¼Œä½†æ˜¯ä»»æ„ä¸€ä¸ªå‡½æ•°ä¸­éƒ½å¯ä»¥éšæ„æ”¹åŠ¨ `counter` çš„å€¼ï¼Œæ‰€ä»¥è¯¥è®¡æ•°å™¨å¹¶ä¸å®Œç¾ï¼Œé‚£æˆ‘ä»¬å°† `counter` æ”¾åˆ°å‡½æ•°ä¸­å¦‚ä½•ï¼Ÿ

```go
package main

import "fmt"

func add() int {
    counter := 0
    counter++
    return counter
}

func main() {
    add()
    add()
    ret := add()
    fmt.Println(ret) // 1
}
```

æœ¬æ„æƒ³è¾“å‡º 3ï¼Œä½†ç”±äºå±€éƒ¨å˜é‡åœ¨å‡½æ•°æ¯æ¬¡è°ƒç”¨æ—¶éƒ½ä¼šè¢«åˆå§‹åŒ–ä¸º 0ï¼Œæ‰€ä»¥è¾¾ä¸åˆ°é¢„æœŸæ•ˆæœã€‚æ‰€ä»¥æˆ‘ä»¬æ­¤æ—¶å°±éœ€è¦ä½¿ç”¨**é—­åŒ…**æ¥è§£å†³äº†ã€‚

```go
package main

import "fmt"

func add() func() int {
    counter := 0
    innerFunc := func() int {
        counter++
        return counter
    }
    return innerFunc
}

func main() {
    inner := add()
    inner()
    inner()
    ret := inner()
    fmt.Println(ret) // 3
}
```

ç²¾ç®€ä¸‹é—­åŒ…ä»£ç ï¼š

```go
package main

import "fmt"

func main() {
    // ä»¥ä¸Šé—­åŒ…çš„ç®€å†™å½¢å¼
    add := func() func() int {
        counter := 0
        return func() int {
            counter++
            return counter
        }
    }()
    
    add()
    add()
    ret := add()
    
    fmt.Println(ret) // 3
}
```

ğŸ’–ç°åœ¨ä¼°è®¡ä½ èƒ½å¾ˆè½»æ¾çš„ç†è§£ä»¥ä¸‹ä»£ç äº†ã€‚

> æ³¨æ„ï¼šç”±äºé—­åŒ…ä¼šæºå¸¦åŒ…å«å®ƒçš„å‡½æ•°çš„ä½œç”¨åŸŸï¼Œå› æ­¤ä¼šæ¯”å…¶ä»–å‡½æ•°å ç”¨æ›´å¤šçš„å†…å­˜ã€‚å› æ­¤å¯ä»¥æ‰‹åŠ¨è§£é™¤å¯¹å†…å±‚åŒ¿åå‡½æ•°çš„å¼•ç”¨ï¼Œä»¥ä¾¿é‡Šæ”¾å†…å­˜ã€‚

```go
package main

import "fmt"

func main() {
    res := closure()
    // æ‰§è¡Œ closure å‡½æ•°è¿”å›çš„å†…å±‚å‡½æ•°
    r1 := res()
    r2 := res()
    
    fmt.Println(res) // è¿”å›å†…å±‚å‡½æ•°å‡½æ•°ä½“åœ°å€: 0x46c7e0
    fmt.Println(r1)  // 1
    fmt.Println(r2)  // 2
    
    // æ‰‹åŠ¨è§£é™¤å¯¹å†…å±‚å‡½æ•°çš„å¼•ç”¨, ä»¥ä¾¿é‡Šæ”¾å†…å­˜
    res = nil
}

// å®šä¹‰ä¸€ä¸ªé—­åŒ…ç»“æ„çš„å‡½æ•°, è¿”å›ä¸€ä¸ªåŒ¿åå‡½æ•°
func closure() func() int { //å¤–å±‚å‡½æ•°
    // å®šä¹‰å¤–å±‚å‡½æ•°çš„å±€éƒ¨å˜é‡a
    a := 0
    // å®šä¹‰å†…å±‚å‡½æ•°å¹¶è¿”å›
    return func() int {
        // å†…å±‚å‡½æ•°ç”¨åˆ°äº†å¤–å±‚å‡½æ•°çš„å±€éƒ¨å˜é‡, æ­¤å˜é‡ä¸ä¼šéšç€å¤–å±‚å‡½æ•°çš„ç»“æŸè€Œé”€æ¯
        a++
        return a
    }
}
```

ğŸ’–`defer` å‡½æ•°æ˜¯ Go è¯­è¨€ä¸­å¦ä¸€å¥‡ç‰¹çš„å­˜åœ¨ï¼šå½“ defer å‡½æ•°è°ƒç”¨åï¼Œä»£ç æš‚ä¸æ‰§è¡Œï¼Œæ¨è¿Ÿåˆ°ä¸»å‡½æ•° `main` æ‰§è¡Œç»“æŸåæ‰ä¼šæ‰§è¡Œï¼›ä¸€èˆ¬ç”¨äºèµ„æºçš„å…³é—­ã€‚

```go
package main

import "fmt"

func main() {
    
    defer func() {
        fmt.Println("Close Resource")
    }()
    fmt.Println("defer...")
    
    // è¾“å‡ºç»“æœ:
    // defer...
    // Close Resource
}
```

#### 2.2.11 æŒ‡é’ˆ

Golang ä¹Ÿæ”¯æŒæŒ‡é’ˆï¼Œç”¨æ³•åŒ C/C++ï¼Œåªä¸è¿‡æ”¯æŒçš„æ“ä½œæ¯”è¾ƒæœ‰é™ã€‚

Go è¯­è¨€ä¸­é€šè¿‡ `&` è·å–å˜é‡çš„åœ°å€ï¼Œé€šè¿‡ `* ` è·å–æŒ‡é’ˆæ‰€å¯¹åº”çš„å˜é‡å­˜å‚¨çš„æ•°å€¼ã€‚

```go
package main

import "fmt"

func add2(n int) {
   n += 2
}

func add2ptr(n *int) {
   *n += 2
}

func main() {
   n := 5
   add2(n)
   fmt.Println(n) // 5
   add2ptr(&n)
   fmt.Println(n) // 7
}
```

ğŸš€æ¥ç€ç®€å•ä»‹ç»ä¸‹ï¼šã€Œ**æ•°ç»„æŒ‡é’ˆ**ã€ã€ã€Œ**æŒ‡é’ˆæ•°ç»„**ã€ã€ã€Œ**æŒ‡é’ˆå‡½æ•°**ã€ã€ã€Œ**æŒ‡é’ˆå‚æ•°**ã€

> åŒºåˆ†**æ•°ç»„æŒ‡é’ˆ**å’Œ**æŒ‡é’ˆæ•°ç»„**çš„å®šä¹‰ï¼Œåªéœ€çœ‹æ¸…å˜é‡åæ›´é è¿‘ `[]`ï¼ˆæŒ‡é’ˆæ•°ç»„ï¼‰ è¿˜æ˜¯ `*`ï¼ˆæ•°ç»„æŒ‡é’ˆï¼‰ã€‚
>
> è‡³äºè¦åŒºåˆ†è¿™äºŒè€…çš„ä½¿ç”¨æ–¹å¼åªéœ€è¦è®°å¾— `[]` ä¼˜å…ˆçº§é«˜äº `*` å³å¯ã€‚

ï¼ˆ1ï¼‰æ•°ç»„æŒ‡é’ˆï¼šæŒ‡å‘æ•°ç»„çš„æŒ‡é’ˆ

![](https://cdn.jsdelivr.net/gh/Wu-yikun/OSS/PicGo/202501202251983.jpeg)

```go
package main

import "fmt"

func main() {
    // æ•°ç»„æŒ‡é’ˆ
    arr := [3]int{1, 2, 3}
    var ars *[3]int
    ars = &arr
    (*ars)[0] = 0
    ars[1] = 1
    fmt.Println(ars)       // &[0 1 3]
    fmt.Println(*ars)      // [0 1 3]
    fmt.Println((*ars)[1]) // 1
}
```

ï¼ˆ2ï¼‰æŒ‡é’ˆæ•°ç»„ï¼šæ•°ç»„å…ƒç´ çš†ä¸ºæŒ‡é’ˆ

![](https://cdn.jsdelivr.net/gh/Wu-yikun/OSS/PicGo/202501202251306.jpeg)

```go
// æŒ‡é’ˆæ•°ç»„
a, b, c := 1, 2, 3
nums := [3]int{a, b, c}
numps := [3]*int{&a, &b, &c}

*numps[1] = 1
*numps[2] = 6
fmt.Println(nums)      // [1 2 3]
fmt.Println(numps)     // [0xc000018128 0xc000018130 0xc000018138]
fmt.Println(*numps[0]) // 1
fmt.Println(*numps[2]) // 6
for _, v := range numps {
    fmt.Print(*v, " ") // 1 1 6
}
```

ï¼ˆ3ï¼‰æŒ‡é’ˆå‡½æ•°ï¼šå¦‚æœä¸€ä¸ªå‡½æ•°è¿”å›ç»“æœæ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½æ•°å°±æ˜¯ä¸€ä¸ªæŒ‡é’ˆå‡½æ•°

```go
package main

import "fmt"

func main() {
    var p = pfunc()
    fmt.Println((*p)[1]) // 2
}

// æŒ‡é’ˆå‡½æ•°: æ­¤å¤„è¿”å›åˆ‡ç‰‡æŒ‡é’ˆ(ç”¨æ³•åŒæ•°ç»„æŒ‡é’ˆ)
func pfunc() *[]int {
    arr := []int{1, 2, 3}
    return &arr
}
```

ï¼ˆ4ï¼‰æŒ‡é’ˆå‚æ•°ï¼šæŒ‡é’ˆä½œä¸ºå‡½æ•°çš„å½¢å‚

```go
package main

import "fmt"

func main() {
    s := 19
    argpfunc(&s)
    fmt.Println(s) // 6
}

// æŒ‡é’ˆå‚æ•°
func argpfunc(p *int) {
    *p = 6
}
```

#### 2.2.12 ç»“æ„ä½“ & ç»“æ„ä½“æ–¹æ³•

Go è¯­è¨€ä¸­ä¸å­˜åœ¨ Class ç±»çš„æ¦‚å¿µï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡ç»“æ„ä½“ `struct` æ¥å®ç°ã€‚åŒæ—¶åœ¨ç»“æ„ä½“ä¸­ä¹Ÿæ”¯æŒæŒ‡é’ˆï¼Œé¿å…å¯¹å¤§ç»“æ„ä½“æ‹·è´çš„å¼€é”€ã€‚

![](https://cdn.jsdelivr.net/gh/Wu-yikun/OSS/PicGo/202501202251505.jpeg)

```go
package main

import "fmt"

type user struct {
    name     string
    password string
}

func main() {
    a := user{name: "wang", password: "1024"}
    b := user{"wang", "1024"}
    c := user{name: "wang"}
    c.password = "1024"
    var d user
    d.name = "wang"
    d.password = "1024"
    e := new(user)
    e.name = "wang"
    e.password = "1024"
    
    fmt.Println(a, b, c, d) // {wang 1024} {wang 1024} {wang 1024} {wang 1024}
    fmt.Println(e)          // &{wang 1024}
    
    fmt.Println(checkPassword(a, "996")) // false
    changePassword(&a, "996")            // é€šè¿‡æŒ‡é’ˆä¿®æ”¹ç»“æ„ä½“ä¸­çš„æ•°æ®
    fmt.Println(a)                       // {wang 996}
    
    // åŒ¿åç»“æ„ä½“ & åµŒå¥—ç»“æ„ä½“
    p := struct {
        age int
        sex string
        u   user
    }{
        age: 21,
        sex: "Male",
        u:   user{"w", "1024"},
    }
    fmt.Println(p) // {21 Male {w 1024}}
}

func checkPassword(u user, password string) bool {
    return u.password == password
}

func changePassword(u *user, password string) {
    u.password = password
}
```

åœ¨ Golang ä¸­è¿˜å¯ä»¥ä¸ºç»“æ„ä½“å»å®šä¹‰æ–¹æ³•ï¼Œç±»ä¼¼å…¶ä»–è¯­è¨€çš„ç±»æˆå‘˜å‡½æ•°ï¼Œè¿™æ ·å°±å¯ä»¥ä½¿ç”¨ `å¯¹è±¡.æ–¹æ³•` å»è°ƒç”¨ç»“æ„ä½“æ–¹æ³•äº†ï¼›ç»“æ„ä½“æ–¹æ³•åˆåˆ†ä¸º**å¸¦æŒ‡é’ˆ**å’Œ**ä¸å¸¦æŒ‡é’ˆ**ä¸¤ç§ï¼Œä¸å¸¦æŒ‡é’ˆçš„æ˜¯ä¸€ç§æ‹·è´ã€‚

```go
package main

import "fmt"

// ç»“æ„ä½“
type user struct {
    name     string
    password string
}

// ç»“æ„ä½“æ–¹æ³•
func (u user) checkingPassword(password string) bool {
    return u.password == password
}

// u user: æ‹·è´ä¼ å…¥çš„ç»“æ„ä½“, ä¸ä¿®æ”¹åŸæœ‰ç»“æ„ä½“
// u *user: å¯ä»¥ä¿®æ”¹ä¼ å…¥çš„ç»“æ„ä½“
func (u *user) changingPassword(password string) {
    u.password = password
}

func main() {
    u := user{
        name:     "w",
        password: "1024",
    }
    // ç»“æ„ä½“æ–¹æ³•çš„è°ƒç”¨
    isEqual := u.checkingPassword("1024")
    u.changingPassword("2022")
    
    fmt.Println(isEqual) // true
    fmt.Println(u)       // {w 2022}
}
```

#### 2.2.13 å­—ç¬¦ä¸²æ“ä½œ

Go è¯­è¨€ä¸­çš„ `strings` æ ‡å‡†åº“å«æœ‰å¾ˆå¤šæ“ä½œå­—ç¬¦ä¸²çš„å·¥å…·å‡½æ•°ï¼Œ`strings` ä¸»è¦é’ˆå¯¹ `utf-8` ç¼–ç ã€‚

```go
package main

import (
    "fmt"
    "strings"
)

func main() {
    a := "hello"
    b := "ä½ å¥½"
    fmt.Println(strings.Contains(a, "he"))         // true
    fmt.Println(strings.Index(a, "l"))             // 2
    fmt.Println(strings.Count(a, "l"))             // 2
    fmt.Println(strings.HasPrefix(a, "he"))        // true
    fmt.Println(strings.HasSuffix(a, "lo"))        // true
    fmt.Println(strings.Join([]string{a, b}, "-")) // hello-ä½ å¥½
    fmt.Println(strings.Repeat(a, 2))              // hellohello
    fmt.Println(strings.Replace(a, "l", "i", 1))   // heilo
    fmt.Println(strings.Split("a-b-c", "-"))       // [a b c]
    fmt.Println(strings.ToUpper(a))                // HELLO
    fmt.Println(strings.ToLower(a))                // hello
    fmt.Println(len(a))                            // 5
    fmt.Println(len(b))                            // 6
}
```

#### 2.2.14 å­—ç¬¦ä¸²æ ¼å¼åŒ–

ğŸ˜Go å¯ä»¥ä½¿ç”¨ `fmt.Printf()` æˆ–è€… `fmt.Sprintf()` æ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼ˆåè€…èƒ½å°†æ ¼å¼åŒ–åçš„å­—ç¬¦ä¸²èµ‹å€¼ç»™æ–°å­—ç¬¦ä¸²ï¼‰ï¼

ğŸ˜Go è¯­è¨€ä¸­é¢å¤–æä¾›äº†å ä½ç¬¦ `%v` æ¥æ‰“å°ä»»æ„ç±»å‹çš„å˜é‡ï¼Œä½ è¿˜å¯ä»¥ç”¨ `%+v`ã€`%#v` æ‰“å°æ›´åŠ è¯¦ç»†çš„ä¿¡æ¯ ...

ğŸ”**å­—ç¬¦ä¸²æ ¼å¼åŒ–ç¬¦å·|ä¸€è§ˆè¡¨**

| å ä½ç¬¦ | è¯´æ˜                                           |
| ------ | ---------------------------------------------- |
| `%d`   | åè¿›åˆ¶çš„æ•°å­—                                   |
| `%T`   | å–ç±»å‹                                         |
| `%s`   | å–å­—ç¬¦ä¸²                                       |
| `%t`   | å– bool ç±»å‹çš„å€¼                               |
| `%p`   | å–å†…å­˜åœ°å€                                     |
| `%b`   | æ•´æ•°ä»¥äºŒè¿›åˆ¶æ˜¾ç¤º                               |
| `%o`   | æ•´æ•°ä»¥å…«è¿›åˆ¶æ˜¾ç¤º                               |
| `%x`   | æ•´æ•°ä»¥åå…­è¿›åˆ¶æ˜¾ç¤º                             |
| `%v`   | ä»»æ„ç±»å‹å˜é‡                                   |
| `%+v`  | åœ¨ `%v` åŸºç¡€ä¸Šï¼Œå¯¹**ç»“æ„ä½“**å­—æ®µåå’Œå€¼è¿›è¡Œå±•å¼€ |
| `%#v`  | è¾“å‡º Go è¯­è¨€è¯­æ³•æ ¼å¼çš„å€¼                       |

```go
package main

import (
    "fmt"
    "time"
)

type point struct {
    x, y int
}

func main() {
    s := "hello"
    n := 123
    f := 3.141592653
    b := true
    p := point{1, 2}
    
    // fmt.Printf()
    fmt.Printf("%s\n", s)   // hello
    fmt.Printf("%d\n", n)   // 123
    fmt.Printf("%b\n", n)   // 1111011
    fmt.Printf("%f\n", f)   // 3.141592653
    fmt.Printf("%.3f\n", f) // 3.142
    fmt.Printf("%t\n", b)   // true
    
    fmt.Printf("%T\n", f) // float64
    fmt.Printf("%T\n", p) // main.point
    
    fmt.Printf("s=%v\n", s)  // s=hello
    fmt.Printf("n=%v\n", n)  // n=123
    fmt.Printf("p=%v\n", p)  // p={1 2}
    fmt.Printf("p=%+v\n", p) // p={x:1 y:2}
    fmt.Printf("p=%#v\n", p) // p=main.point{x:1, y:2}
    
    // fmt.Sprintf()
    motto := fmt.Sprintf("Today is %s, and I'm working under the %d system...\n", time.Now(), 965)
    fmt.Printf(motto)
    
    // åˆ©ç”¨ fmt.Sprintf() æ–¹æ³•è¿”å› string çš„ç‰¹æ€§, å¯ä»¥å°† int è½¬ä¸º string
    intVal := 1024
    var strVal string = fmt.Sprintf("%d", intVal) // int è½¬ string
    fmt.Printf("%T", strVal)                      // string
}
```

#### 2.2.15 æ¥å£

Golang æ¥å£å†…å¯ä»¥å®šä¹‰å¤šä¸ªæ–¹æ³•ï¼Œè°å°†è¿™äº›æ–¹æ³•å®ç°ï¼Œå°±å¯ä»¥è®¤ä¸ºæ˜¯å®ç°äº†è¯¥æ¥å£ï¼ˆè¿™æ˜¯ä¸€ç§çº¦æŸï¼Œä¸åƒ Java è¿˜éœ€è¦ `implements` æ¥æ˜¾å¼å®ç°ï¼‰ï¼Œè¿™æ ·è§„èŒƒäº†æ–¹æ³•ã€‚åœ¨è°ƒç”¨çš„æ—¶å€™ä½¿ç”¨ä¸åŒçš„ç»“æ„ä½“å¯¹è±¡ï¼Œå¯ä»¥å®ç°æ‰§è¡Œä¸åŒçš„æ–¹æ³•ã€‚è¿™æ ·å°±å®ç°äº† Go è¯­è¨€ä¸­çš„å¤šæ€ã€‚

![](https://cdn.jsdelivr.net/gh/Wu-yikun/OSS/PicGo/202501202252091.jpeg)

```go
package main

import "fmt"

type action interface {
    // run: run in speed
    run(int)
    // get: get name
    get() string
}

type person struct {
    name  string
    speed int
}

type animal struct {
    types    string
    velocity int
}

func (per *person) run(speed int) {
    fmt.Println("Run in", speed, "m/s")
}

func (per *person) get() string {
    return per.name
}

func (ani *animal) run(velocity int) {
    fmt.Println("Run in", velocity, "m/s")
}

func (ani *animal) get() string {
    return ani.types
}

func main() {
    per := person{name: "w", speed: 1}
    ani := animal{types: "tiger", velocity: 6}
    
    var act action
    act = &per
    act.run(per.speed) // Run in 1 m/s
    name := act.get()  // w
    
    act = &ani
    act.run(ani.velocity) // Run in 6 m/s
    types := act.get()    // tiger
    
    fmt.Println(name, types)    // w tiger
}
```

ğŸŒ“Golang è¿˜å­˜åœ¨ç©ºæ¥å£ `interface{}`ï¼Œè¿™ç§ç±»å‹å¯ä»¥ç†è§£ä¸ºä»»æ„ç±»å‹ï¼Œç±»ä¼¼ Java ä¸­çš„ `Object` ç±»ã€‚

```go
package main

import "fmt"

// T ç©ºæ¥å£çš„å®šä¹‰, ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ interface{}
type T interface {
}

func test1(t T) {
    fmt.Println(t)
}

// ç®€åŒ–: T=interface{}
func test2(t interface{}) {
    fmt.Println(t)
}
```

â­æ—¢ç„¶ç©ºæ¥å£å¯ä»¥ä¼ é€’ä»»æ„ç±»å‹ï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨è¿™ä¸ªç‰¹æ€§æŠŠç©ºæ¥å£ `interface{}` å½“ä½œå®¹å™¨ä½¿ç”¨ã€‚

```go
// interface{} ä½œä¸º map çš„ value
maps := make(map[int]interface{})
maps[1] = 1
maps[3] = "369"
maps[6] = true
maps[9] = 9.9

fmt.Println(maps) // map[1:1 3:369 6:true 9:9.9]
```

```go
package main

import "fmt"

// Dictionary å°è£…map
type Dictionary struct {
    data map[string]interface{}
}

func NewDictionary() *Dictionary {
    return &Dictionary{
        data: make(map[string]interface{}),
    }
}

func (dict *Dictionary) Set(key string, value interface{}) {
    dict.data[key] = value
}

func (dict *Dictionary) Get(key string) interface{} {
    return dict.data[key]
}

func main() {
    // Dictionary
    dict := NewDictionary()
    dict.Set("a", "abandon")
    dict.Set("b", 2)
    dict.Set("c", false)
    
    fmt.Println(dict.Get("a"))  // abandon
    fmt.Println(dict.Get("d"))  // <nil>
}
```

ğŸ’–æ›´å¤šå…³äºç©ºæ¥å£çš„è§£é‡Šï¼š[The Go Empty Interface Explained](https://flaviocopes.com/go-empty-interface/)

#### 2.2.16 é”™è¯¯å¤„ç†

ğŸ’§é”™è¯¯å’Œå¼‚å¸¸ä¸åŒï¼š

- é”™è¯¯æ˜¯åœ¨ç¨‹åºä¸­æ­£å¸¸å­˜åœ¨çš„ï¼Œå¯ä»¥é¢„çŸ¥çš„å¤±è´¥åœ¨æ„æ–™ä¹‹ä¸­ã€‚
- å¼‚å¸¸é€šå¸¸æŒ‡åœ¨ä¸åº”è¯¥å‡ºç°é—®é¢˜çš„åœ°æ–¹å‡ºç°é—®é¢˜ï¼Œæ¯”å¦‚ç©ºæŒ‡é’ˆï¼Œè¿™åœ¨äººä»¬çš„æ„æ–™ä¹‹å¤–ã€‚

åœ¨ Golang ä¸­ï¼Œé”™è¯¯å¤„ç†é€šå¸¸è¢«å•ç‹¬ä½œä¸ºä¸€ä¸ªè¿”å›å€¼ä»¥ä¼ é€’é”™è¯¯ä¿¡æ¯ã€‚ä¸åŒäº Javaï¼ŒGo è¯­è¨€èƒ½å¾ˆæ¸…æ™°çš„çŸ¥é“æ˜¯å“ªä¸ªå‡½æ•°è¿”å›äº†é”™è¯¯ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨ç®€å•çš„ `if-else` è¯­å¥åŠ ä»¥å¤„ç†ã€‚

ğŸ”`error` çš„å®šä¹‰æ˜¯ä¸€ä¸ªæ¥å£ï¼Œæ¥å£å†…éƒ¨åŒ…å«ä¸€ä¸ªè¿”å›å­—ç¬¦ä¸²ç±»å‹çš„æ–¹æ³• `Error()`ã€‚

```go
type error interface {
    Error() string
}
```

æ¸…æ¥š `error` çš„å®šä¹‰æ˜¯ä¸€ä¸ªæ¥å£ç±»å‹åï¼Œé‚£ä¹ˆåªè¦å®ç°äº†è¿™ä¸ªæ¥å£éƒ½å¯ä»¥ç”¨æ¥å¤„ç†é”™è¯¯ä¿¡æ¯ï¼Œæ¥è¿”å›ä¸€ä¸ªé”™è¯¯æç¤ºç»™ç”¨æˆ·ã€‚

Go è¯­è¨€ä¹Ÿæä¾›äº†ä¸€ä¸ªå†…ç½®åŒ… `errors`ï¼Œä½¿ç”¨ `errors.New("")` æ¥åˆ›å»ºä¸€ä¸ªé”™è¯¯å¯¹è±¡ï¼Œä»¥ä¸‹ä¸º `errors` å†…ç½®åŒ…ä¸­ `errors.go` çš„å®šä¹‰ï¼š

```go
package errors

// New returns an error that formats as the given text.
// Each call to New returns a distinct error value even if the text is identical.
func New(text string) error {
   return &errorString{text}
}

// errorString is a trivial implementation of error.
type errorString struct {
   s string
}

func (e *errorString) Error() string {
   return e.s
}
```

â­é€šå¸¸çš„åšæ³•æ˜¯ï¼šå½“å‡ºé”™æ—¶ï¼Œè¿”å›ä¸€ä¸ª `nil` å’Œä¸€ä¸ª `error`ï¼›å¦åˆ™ç›´æ¥è¿”å›åŸæœ‰å€¼å’Œ `nil`ã€‚

```go
package main

import (
    "errors"
    "fmt"
)

type user struct {
    name     string
    password string
}

func findUser(users []user, name string) (v *user, err error) {
    for _, u := range users {
        if u.name == name {
            return &u, nil
        }
    }
    return nil, errors.New("not found")
}

func main() {
    users := []user{{"w", "1024"}, {"q", "996"}}
    
    u, e := findUser(users, "w")
    if e != nil {
        fmt.Println(e)
        return
    }
    fmt.Println(*u) // {w 1024}
    
    if us, err := findUser(users, "r"); err != nil {
        fmt.Println(err) // not found
        return
    } else {
        fmt.Println(*us)
    }
}
```

#### 2.2.17 æ—¶é—´å¤„ç†

å…³äºæ—¶é—´å¤„ç†ï¼Œæœ€å¸¸ç”¨çš„è«è¿‡äº `time.now()` è·å–å½“å‰æ—¶é—´ã€‚ä»¥ä¸‹è¿˜æœ‰ä¸€äº› `time` å†…ç½®åŒ…çš„å¸¸è§ç”¨æ³•ï¼š

```go
package main

import (
    "fmt"
    "time"
)

func main() {
    nowTime := time.Now()
    fmt.Println(nowTime) // 2022-05-09 13:02:24.4523211 +0800 CST m=+0.007505401
    
    // Date(): è·å–å¹´æœˆæ—¥
    year, month, day := time.Now().Date()
    fmt.Println(year, month, day) // 2022 May 09
    // Clock(): è·å–æ—¶åˆ†ç§’
    hour, minute, second := time.Now().Clock()
    fmt.Println(hour, minute, second) // 13 1 1
    
    // æ ¼å¼åŒ–æ—¶é—´
    formatTime1 := nowTime.Format("2006/01/02 15:04:05")
    fmt.Println(formatTime1) // 2022/05/09 11:40:29
    formatTime2 := nowTime.Format("2006å¹´01æœˆ02æ—¥ 15æ—¶04åˆ†05ç§’")
    fmt.Println(formatTime2) // 2022å¹´05æœˆ09æ—¥ 11æ—¶41åˆ†25ç§’
    
    // æ„é€ å¸¦æ—¶åŒºçš„æ—¶é—´
    created := time.Date(2022, 5, 9, 11, 12, 13, 0, time.UTC)
    fmt.Println(created) // 2022-05-09 11:12:13 +0000 UTC
    fmt.Println(created.Year(), created.Month(), created.Day(),
        created.Hour(), created.Minute(), created.Second()) // 2022 May 9 11 12 13
    
    // Add(): å¯¹æŸä¸ªæ—¶é—´ç‚¹è¿›è¡Œå¢åŠ æ—¶é—´é—´éš”çš„æ“ä½œ
    // Sub(): å¯ä»¥å¯¹ä¸¤ä¸ªæ—¶é—´ç‚¹è¿›è¡Œå‡æ³•ç„¶åè·å–æ—¶é—´æ®µ
    another := created.Add(time.Hour + time.Minute*3)
    diff := another.Sub(created)
    fmt.Println(diff)                         // 1h3m0s
    fmt.Println(diff.Hours(), diff.Minutes()) // 1.05 63
    
    // æ—¶é—´æˆ³
    fmt.Println(nowTime.Unix()) // 1652417743
    
    // æ—¶é—´è§£æ
    t, err := time.Parse("2006-01-02 15:04:05", "2022-05-09 11:12:13")
    if err != nil {
        panic(err)
    }
    fmt.Println(t == created) // true
}
```

ğŸ˜®æ›´å¤šï¼š

- [Go çš„æ—¶é—´æ ¼å¼åŒ–ä¸ºä»€ä¹ˆæ˜¯ 2006-01-02 15:04:05ï¼Ÿ](https://polarisxu.studygolang.com/posts/go/why-time-use-2006/)
- [Golang ç¥å¥‡çš„ 2006-01-02 15:04:05](https://www.jianshu.com/notifications)

#### 2.2.18 JSON å¤„ç†

Go ä¸­æ“ä½œ JSON éå¸¸ç®€å•ï¼Œå¯¹äºä¸€ä¸ªç»“æ„ä½“æˆ‘ä»¬åªéœ€è¦ç¡®ä¿æ¯ä¸ªå­—æ®µçš„é¦–å­—æ¯ä¸ºå¤§å†™ï¼ˆå³å…¬å¼€å­—æ®µï¼‰ï¼Œé‚£ä¹ˆè¿™ä¸ªç»“æ„ä½“å°±èƒ½å¤Ÿç”¨ `json.Marshal` å»åºåˆ—åŒ–æˆä¸€ä¸ª JSON `byte[]`ï¼Œå¦‚æœè¦è½¬åŒ–æˆå­—ç¬¦ä¸²åˆ™é€šè¿‡ `string()` å³å¯ï¼›åºåˆ—åŒ–åçš„å­—ç¬¦ä¸²ä¹Ÿå¯ä»¥ç”¨ `json.Unmarshal` å»ååºåˆ—åŒ–åˆ°ä¸€ä¸ª `struct` å˜é‡ä¸­ã€‚

```go
package main

import (
    "encoding/json"
    "fmt"
)

type userInfo struct {
    Name  string
    Age   int `json:"age"` // `json:"age"` æ˜¯ json tag, å¯ä»¥æŒ‰ tag åè¿›è¡Œè¾“å‡º
    Hobby []string
}

func main() {
    // struct ==> json(string)
    user := userInfo{Name: "w", Age: 21, Hobby: []string{"Java", "Golang", "Python", "C++"}}
    buf, err := json.Marshal(user) // struct ==> byte[]
    if err != nil {
        panic(err)
    }
    fmt.Println(buf)         // byte[]: [123 34 78 97...]
    fmt.Println(string(buf)) // string: {"Name":"w","age":21,"Hobby":["Java","Golang","Python","C++"]}
    
    // struct ==> json(string): å¸¦æœ‰ç¼©è¿›çš„æ ‡å‡† JSON æ ¼å¼
    buf, err = json.MarshalIndent(user, "", "\t")
    if err != nil {
        panic(err)
    }
    fmt.Println(string(buf))
    /* è¾“å‡ºç»“æœ:
       {
               "Name": "w",
               "age": 21,
               "Hobby": [
                       "Java",
                       "Golang",
                       "Python",
                       "C++"
               ]
       }
    */
    
    // json(string) ==> struct
    var u userInfo
    err = json.Unmarshal(buf, &u)
    if err != nil {
        panic(err)
    }
    fmt.Printf("%#v", u) // main.userInfo{Name:"w", Age:21, Hobby:[]string{"Java", "Golang", "Python", "C++"}}
}
```

#### 2.2.19 æ•°å­—è§£æ

æ¥ä¸‹æ¥å­¦ä¹ ä¸‹å­—ç¬¦ä¸²ä¸æ•°å­—ä¹‹é—´çš„è½¬æ¢ï¼Œåœ¨ Go è¯­è¨€ä¸­ï¼Œå…³äºå­—ç¬¦ä¸²å’Œæ•°å­—ç±»å‹çš„è½¬æ¢éƒ½åœ¨ `strconv` å†…ç½®åŒ…ä¸­ï¼Œè¿™ä¸ªåŒ…åæ˜¯ string & convert ä¸¤ä¸ªå•è¯çš„ç¼©å†™æ‹¼æ¥è€Œæˆã€‚

```go
package main

import (
    "fmt"
    "strconv"
)

func main() {
    f, _ := strconv.ParseFloat("1.234", 64)
    fmt.Println(f) // 1.234
    
    n, _ := strconv.ParseInt("111", 10, 64)
    fmt.Println(n) // 111
    
    n, _ = strconv.ParseInt("0x1000", 0, 64)
    fmt.Println(n) // 4096
    
    // string ==> int
    n2, _ := strconv.Atoi("123") // Atoi is equivalent to `ParseInt()`
    fmt.Println(n2)              // 123
    
    // int ==> string
    var str string = strconv.Itoa(123)
    fmt.Println(str) // 123
    
    n2, err := strconv.Atoi("AAA")
    fmt.Println(n2, err) // 0 strconv.Atoi: parsing "AAA": invalid syntax
}
```

#### 2.2.20 è¿›ç¨‹ä¿¡æ¯

åœ¨ Go ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `os.Args` æ¥è·å–ç¨‹åºæ‰§è¡Œæ—¶æŒ‡å®šçš„å‘½ä»¤è¡Œå‚æ•°ã€‚

> â­æ¯”å¦‚æˆ‘ä»¬ç¼–è¯‘ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œæ‰§è¡Œ `go run example/20-env/main.go a b c d` å‘½ä»¤ï¼Œå…¶ä¸­æœ‰ `a b c d` å››ä¸ªå‘½ä»¤è¡Œå‚æ•°ï¼Œä½†æ˜¯ `os.Args` ä¼šæ˜¯é•¿åº¦ä¸º 5 çš„ sliceï¼Œå› ä¸ºç¬¬ä¸€ä¸ªæˆå‘˜ä»£è¡¨äºŒè¿›åˆ¶è‡ªèº«çš„åå­—ã€‚

```go
package main

import (
    "fmt"
    "os"
    "os/exec"
)

func main() {
    // go run example/20-env/main.go a b c d
    fmt.Println(os.Args) // [/var/folders/8p/n34xxfnx38dg8bv_x8l62t_m0000gn/T/go-build3406981276/b001/exe/main a b c d]
    slices := os.Args
    fmt.Println(len(slices))       // 5
    fmt.Println(os.Getenv("PATH")) // /usr/local/go/bin...
    fmt.Println(os.Setenv("AA", "BB"))
    
    buf, err := exec.Command("grep", "127.0.0.1", "/etc/hosts").CombinedOutput()
    if err != nil {
        panic(err)
    }
    fmt.Println(string(buf)) // 127.0.0.1       localhost
}
```

ğŸ”ã€ŒGo å…¥é—¨ã€ä¸­çš„éƒ¨åˆ†å›¾ç‰‡å¼•ç”¨è‡ªï¼šhttps://juejin.cn/book/6844733833401597966

## 3. Go å®æˆ˜ç¨‹åº

ä¸Šæ–‡å·²ç»ä»‹ç»äº† Go è¯­è¨€çš„åŸºç¡€è¯­æ³•å’Œä¸€äº›å¸¸ç”¨æ ‡å‡†åº“çš„ä½¿ç”¨æ–¹æ³•ï¼Œæ¥ä¸‹æ¥é€šè¿‡ 3 ä¸ªå®ä¾‹çœŸæ­£ä¸Šæ‰‹ Golangï¼

### 3.1 çŒœè°œæ¸¸æˆ

![](https://cdn.jsdelivr.net/gh/Wu-yikun/OSS/PicGo/202501202252758.jpeg)

å”¯ä¸€éœ€è¦æ³¨æ„çš„æ˜¯ **Linux/Unix**ã€**Windows**ã€**Mac OS** ä¸‰ä¸ªæ“ä½œç³»ç»Ÿä¸‹**æ¢è¡Œç¬¦ä¸ä¸€è‡´**é—®é¢˜ï¼

- **Linux/Unix**ï¼šæ¢è¡Œç¬¦ä¸º `\n`
- **Mac OS**ï¼šæ¢è¡Œç¬¦ä¸º `\r`
- **Windows**ï¼šæ¢è¡Œç¬¦ä¸º`\r\n`

> é™„éƒ¨åˆ† ASCII ç å¯¹ç…§è¡¨

![](https://cdn.jsdelivr.net/gh/Wu-yikun/OSS/PicGo/202501202252971.jpeg)

OKï¼Œå¦‚ä¸‹å°±å¯ä»¥å®ç°ä¸€ä¸ªç®€å•çš„çŒœè°œæ¸¸æˆç¨‹åºäº†ï¼

```go
package main

import (
    "bufio"
    "fmt"
    "math/rand"
    "os"
    "strconv"
    "strings"
    "time"
)

func main() {
    maxNum := 100
    // ç”¨æ—¶é—´æˆ³åˆå§‹åŒ–éšæœºæ•°ç§å­
    rand.Seed(time.Now().UnixNano())
    // rand.Intn(100): äº§ç”Ÿ 0 åˆ° 100 ä¹‹é—´çš„éšæœºæ•´æ•°
    secretNumber := rand.Intn(maxNum)
    
    fmt.Print("Please input your guess: ")
    reader := bufio.NewReader(os.Stdin)
    for {
        // è¯»å–ä¸€è¡Œè¾“å…¥: è¯»åˆ° \nxxxx\n ==> éœ€è¦å»æ‰\n
        input, err := reader.ReadString('\n') // è¾“å…¥ç»“æŸç¬¦: \n
        if err != nil {
            fmt.Println("An error occured while reading input. Please try again", err)
            continue
        }
        
        // Windows â€”â€” CRLF(å›è½¦+æ¢è¡Œ): \r\n
        // Linux/Unix â€”â€” LF(æ¢è¡Œ): \n
        // Mac OS â€”â€” CR(å›è½¦): \r
        /* strings.TrimSuffix(): å»æ‰æœ€åè¯»å…¥çš„å›è½¦æ¢è¡Œ "\r\n" */
        input = strings.TrimSuffix(input, "\r\n")
        
        // Atoi: string ==> int
        // Itoa: int ==> string
        guess, err := strconv.Atoi(input)
        if err != nil {
            fmt.Println("Invalid input. Please enter an integer value")
            continue
        }
        fmt.Println("You guess is", guess)
        if guess > secretNumber {
            fmt.Println("Your guess is bigger than the secret number. Please try again")
        } else if guess < secretNumber {
            fmt.Println("Your guess is smaller than the secret number. Please try again")
        } else {
            fmt.Println("Correct, you Legend!")
            break
        }
    }
}
```

### 3.2 åœ¨çº¿è¯å…¸

![](https://cdn.jsdelivr.net/gh/Wu-yikun/OSS/PicGo/202501202252847.jpeg)

ä»¥[å½©äº‘å°è¯‘](https://fanyi.caiyunapp.com/#/)ä¸ºä¾‹ï¼Œæ¥æ‰’ä¸€ä¸‹ç¿»è¯‘æ¥å£ï¼š

![](https://cdn.jsdelivr.net/gh/Wu-yikun/OSS/PicGo/202501202253295.jpeg)

æˆ‘ä»¬éœ€è¦åœ¨ Golang ä¸­å‘é€è¯¥è¯·æ±‚ï¼Œå› ä¸ºè¿™ä¸ªè¯·æ±‚æ¯”è¾ƒå¤æ‚ï¼Œè¾ƒéš¾ç”¨ä»£ç æ„é€ ï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ©**ç¬¬ä¸‰æ–¹å·¥å…· [curlconverter](https://curlconverter.com/)**  æ¥ç”Ÿæˆä»£ç ã€‚

é¦–å…ˆ `Copy as cURL (bash)`ï¼Œç„¶åå€ŸåŠ© curlconverter å·¥å…·ç”Ÿæˆ Golang å¯¹åº”çš„è¯·æ±‚ä»£ç ï¼š

![](https://cdn.jsdelivr.net/gh/Wu-yikun/OSS/PicGo/202501202253481.jpeg)

å°†ä»£ç ç›´æ¥è¿è¡Œå¯å¾—åˆ°è¯·æ±‚æˆåŠŸåè¿”å›çš„ JSON ç»“æœï¼ˆ`v1`ï¼‰ï¼š

![](https://cdn.jsdelivr.net/gh/Wu-yikun/OSS/PicGo/202501202253288.jpeg)

ç„¶åæˆ‘ä»¬éœ€è¦æ ¹æ® `Response Body` æ„é€ å‡ºå¯¹åº”çš„ç»“æ„ä½“ï¼Œç„¶åå°†å“åº”å›æ¥çš„ json å­—ç¬¦ä¸²ååºåˆ—åŒ–åˆ°ç»“æ„ä½“ä¸­ï¼Œæ˜¾ç„¶æˆ‘ä»¬ä¸å¯èƒ½è‡ªå·±æ„é€ ï¼ˆç¹çä¸”æ˜“å‡ºé”™ï¼‰ï¼Œæ­¤æ—¶éœ€è¦å†å€ŸåŠ©**ç¬¬ä¸‰æ–¹å·¥å…· [OKTools](https://oktools.net/)** ç”Ÿæˆå¯¹åº”çš„ç»“æ„ä½“ã€‚

å…·ä½“åšæ³•æ˜¯å°†å½©äº‘å°è¯‘ä¸­å“åº”çš„ json å­—ç¬¦ä¸²ç²˜è´´åˆ° OKTools ç”Ÿæˆå¯¹åº”çš„ç»“æ„ä½“ï¼š

![](https://cdn.jsdelivr.net/gh/Wu-yikun/OSS/PicGo/202501202253844.jpeg)

![](https://cdn.jsdelivr.net/gh/Wu-yikun/OSS/PicGo/202501202253582.jpeg)

æ„é€ ã€Œè¯·æ±‚ç»“æ„ä½“ã€ä¸ã€Œå“åº”ç»“æ„ä½“ã€åï¼Œå†æ¬¡å‘é€è¯·æ±‚è¯•è¯•ï¼ˆ`v3`ï¼‰ï¼š

![](https://cdn.jsdelivr.net/gh/Wu-yikun/OSS/PicGo/202501202253987.jpeg)

å¯ä»¥çœ‹å‡ºæ‰€æœ‰ä¿¡æ¯éƒ½å·²ç»æ‰“å°å‡ºæ¥ï¼Œä½†è¿™å¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼Œæˆ‘ä»¬åªæ‰“å° `explanations` å’Œ `prons` è¿™ä¸¤éƒ¨åˆ†çš„ä¿¡æ¯å³å¯ã€‚

![](https://cdn.jsdelivr.net/gh/Wu-yikun/OSS/PicGo/202501202254564.jpeg)

è¿™æ ·**åœ¨çº¿è¯å…¸**å°±å®Œæˆäº†ï¼Œå¯ä»¥è¿è¡Œä»¥ä¸‹ç¨‹åºå°è¯•ä¸€ä¸‹ã€‚

![](https://cdn.jsdelivr.net/gh/Wu-yikun/OSS/PicGo/202501202254213.jpeg)

### 3.3 SOCKS5 ä»£ç†

å…ˆæµ…æµ…æ¼”ç¤ºä¸‹æœ€ç»ˆæ•ˆæœï¼šå¯åŠ¨ Golang ä»£ç†æœåŠ¡å™¨ç¨‹åºï¼Œç„¶åé€šè¿‡å‘½ä»¤è¡Œ `curl -socks5 ä»£ç†æœåŠ¡å™¨åœ°å€ ç›®æ ‡URL` æµ‹è¯•ï¼ˆæˆ–è€…é€šè¿‡ SwitchyOmega æ’ä»¶é…ç½®ï¼Œç„¶åç›´æ¥è®¿é—®ç½‘ç«™ï¼‰ï¼Œå¦‚æœä»£ç†æœåŠ¡å™¨èƒ½æ­£å¸¸å·¥ä½œï¼Œé‚£ä¹ˆ `curl` å‘½ä»¤å°±ä¼šæ­£å¸¸è¿”å›ï¼Œä»£ç†æœåŠ¡å™¨çš„æ—¥å¿—ä¹Ÿä¼šæ‰“å°å‡ºä½ æ‰€è®¿é—®çš„ç½‘ç«™åŸŸåæˆ–è€… IPï¼Œè¿™è¯´æ˜æˆ‘ä»¬çš„ç½‘ç»œæµé‡æ˜¯é€šè¿‡æ­¤ä»£ç†æœåŠ¡å™¨è½¬å‘çš„ã€‚

![](https://cdn.jsdelivr.net/gh/Wu-yikun/OSS/PicGo/202501202254999.jpeg)

è¿™é‡Œæˆ‘ä»¬å°†è¦ç¼–å†™ä¸€ä¸ªè¾ƒä¸ºå¤æ‚çš„ socks5 ä»£ç†æœåŠ¡å™¨ï¼Œè™½ç„¶ socks5 åè®®æ˜¯ä»£ç†åè®®ï¼Œä½†æ˜¯å®ƒå¹¶ä¸èƒ½ç”¨äºå‡ºå»ï¼Œå®ƒçš„åè®®ä½¿ç”¨**æ˜æ–‡ä¼ è¾“**ã€‚

è¯¥åè®®è¯ç”Ÿäºäº’è”ç½‘æ—©æœŸï¼Œå› ä¸ºæ—©äº›æ—¶å€™æŸäº›äº’è”ç½‘çš„å†…ç½‘ä¸ºäº†ç¡®ä¿å®‰å…¨æ€§ï¼Œæœ‰å¾ˆä¸¥æ ¼çš„é˜²ç«å¢™ç­–ç•¥ï¼Œä½†æ˜¯è¿™ä¼šä½¿å…¶è®¿é—®æŸäº›èµ„æºè¾ƒä¸ºéº»çƒ¦ï¼Œæ‰€ä»¥ `socks5` åº”è¿è€Œç”Ÿï¼Œå®ƒç›¸å½“äºåœ¨é˜²ç«å¢™ä¸Šå¼€ä¸ªå£å­ï¼Œè®©æˆæƒç”¨æˆ·å¯ä»¥é€šè¿‡å•ä¸ªç«¯å£è®¿é—®å†…éƒ¨èµ„æºã€‚

å®é™…ä¸Šå¾ˆå¤šè½¯ä»¶æœ€ç»ˆæš´éœ²çš„ä¹Ÿæ˜¯ä¸€ä¸ª `socks5` åè®®çš„ç«¯å£ï¼Œå…¶å®çˆ¬è™«ä¸­æ‰€ä½¿ç”¨çš„ IP ä»£ç†æ± ä¸­å¾ˆå¤šä»£ç†åè®®å°±æ˜¯ `socks5`ã€‚

æ¥ç€ç®€å•äº†è§£ä¸‹ `socks5` çš„å·¥ä½œåŸç†ï¼ˆä¸‹é™„å›¾è§£ï¼‰ï¼Œå¤§è‡´æµç¨‹æ˜¯æµè§ˆå™¨ä¸ `socks5` ä»£ç†æœåŠ¡å™¨å»ºç«‹ TCP è¿æ¥ï¼Œç„¶å `socks5` ä»£ç†æœåŠ¡å™¨å†ä¸ç›®æ ‡æœåŠ¡å™¨å»ºç«‹ TCP è¿æ¥ï¼Œè¿™é‡Œå¯åˆ†ä¸ºå››ä¸ªé˜¶æ®µï¼š**æ¡æ‰‹é˜¶æ®µ**ã€**è®¤è¯é˜¶æ®µ**ã€**è¯·æ±‚é˜¶æ®µ**ã€**relay é˜¶æ®µ**ã€‚

- ç¬¬ä¸€é˜¶æ®µâ€”â€”**æ¡æ‰‹**ï¼šæµè§ˆå™¨å‘ `socks5` ä»£ç†æœåŠ¡å™¨å‘èµ·è¯·æ±‚ï¼Œå…¶ä¸­çš„æ•°æ®åŒ…å†…å®¹åŒ…æ‹¬åè®®ç‰ˆæœ¬å· `VER`ï¼Œè¿˜æœ‰æ”¯æŒçš„è®¤è¯ç§ç±» `NMETHODS`ï¼Œä»¥åŠå…·ä½“çš„è®¤è¯æ–¹æ³• `METHOD`ã€‚å¦‚æœç±»å‹ä¸º `00` åˆ™è¡¨ç¤ºä¸éœ€è¦è®¤è¯ï¼Œå¦‚æœä¸ºå…¶ä»–ç±»å‹åˆ™è¿›å…¥è®¤è¯æµç¨‹ã€‚
- ç¬¬äºŒé˜¶æ®µâ€”â€”**è®¤è¯**ï¼šä¸ä½œè¯¦ç»†ä»‹ç»ã€‚
- ç¬¬ä¸‰é˜¶æ®µâ€”â€”**è¯·æ±‚**ï¼šè®¤è¯é€šè¿‡åæµè§ˆå™¨ä¼šå‘ socks5 ä»£ç†æœåŠ¡å™¨å‘èµ· Connection è¯·æ±‚ï¼Œä¸»è¦ä¿¡æ¯åŒ…æ‹¬ç‰ˆæœ¬å· `VER`ã€è¯·æ±‚ç±»å‹ `CMD`ã€ä¿ç•™å­—æ®µ `RSV`ã€ç›®æ ‡åœ°å€ç±»å‹ `ATYP`ã€ç›®æ ‡ IP & Portã€‚ä»£ç†æœåŠ¡å™¨æ¥æ”¶åˆ°è¯·æ±‚åï¼Œä¼šå’Œç›®æ ‡æœåŠ¡å™¨å»ºç«‹èµ·è¿æ¥ï¼Œç„¶åè¿”å›å“åº”ã€‚
- ç¬¬å››é˜¶æ®µâ€”â€”**relay**ï¼šæ­¤æ—¶æµè§ˆå™¨ä¸ç›®æ ‡æœåŠ¡å™¨å°±å¯ä»¥é€šè¿‡ socks5 ä»£ç†è¿›è¡Œæ•°æ®çš„æ­£å¸¸æ”¶å‘ã€‚

> `SOCKS5` åè®®å·¥ä½œåŸç†

![](https://cdn.jsdelivr.net/gh/Wu-yikun/OSS/PicGo/202501202254305.jpeg)

ğŸ˜®åœ¨æ­£å¼å®ç° `socks5` ä»£ç†å‰ï¼Œæˆ‘ä»¬å…ˆç”¨ Golang å®ç°ä¸€ä¸ªç®€å•çš„ **TCP Echo Server** è¿‡æ¸¡ä¸€ä¸‹ï¼š

![](https://cdn.jsdelivr.net/gh/Wu-yikun/OSS/PicGo/202501202254490.jpeg)

![](https://cdn.jsdelivr.net/gh/Wu-yikun/OSS/PicGo/202501202255761.jpeg)

ğŸ’–ã€Œ`SOCKS5` ä»£ç†æœåŠ¡å™¨ã€å®Œæ•´ä»£ç ï¼ˆé™„è¶…è¯¦ç»†çš„ä»£ç æ³¨é‡Šï¼‰

![](https://cdn.jsdelivr.net/gh/Wu-yikun/OSS/PicGo/202501202255643.jpeg)

ğŸ¥°æ¥ç€å°±æ˜¯æµ‹è¯•ç¯èŠ‚äº†ï¼Œ`å‘½ä»¤è¡Œæµ‹è¯•`å’Œ`æµè§ˆå™¨æµ‹è¯•`å„æ¼”ç¤ºä¸€æ¬¡ã€‚

> **å‘½ä»¤è¡Œæµ‹è¯•**

![](https://cdn.jsdelivr.net/gh/Wu-yikun/OSS/PicGo/202501202255056.jpeg)

> **æµè§ˆå™¨æµ‹è¯•**ï¼šé€šè¿‡ **SwitchyOmega** æ’ä»¶é…ç½®è®¿é—®ç½‘ç«™ï¼Œä»£ç†æœåŠ¡å™¨è¿›è¡Œå“åº”

![](https://cdn.jsdelivr.net/gh/Wu-yikun/OSS/PicGo/202501202255638.jpeg)

![](https://cdn.jsdelivr.net/gh/Wu-yikun/OSS/PicGo/202501202256437.jpeg)

## 4. è¯¾åä½œä¸š

![](https://cdn.jsdelivr.net/gh/Wu-yikun/OSS/PicGo/202501202256153.jpeg)

### 4.1 ç®€åŒ–çŒœè°œæ¸¸æˆ

å…³é”®ä»£ç ï¼š

```go
var guess int
_, err := fmt.Scanf("%d\r\n", &guess) // windows
```

æœ€ç»ˆä»£ç ï¼š

![](https://cdn.jsdelivr.net/gh/Wu-yikun/OSS/PicGo/202501202256036.jpeg)

### 4.2 æ–°å¢ç¿»è¯‘å¼•æ“

æ‰€ä½¿ç”¨çš„ç¿»è¯‘å¼•æ“ï¼š[æœ‰é“æ™ºäº‘AIç¿»è¯‘](https://ai.youdao.com/product-fanyi-text.s)

å…·ä½“æ“ä½œä¸Šæ–‡å·²ç»è¯¦ç»†ä»‹ç»è¿‡äº†ï¼Œä»£ç å¦‚ä¸‹ï¼š

![](https://cdn.jsdelivr.net/gh/Wu-yikun/OSS/PicGo/202501202256285.jpeg)

ğŸš€è¿™é‡Œè¡¥å……æ¨èå‡ ä¸ªç¿»è¯‘æ¥å£ï¼š

- [å¿…åº”ç¿»è¯‘](https://cn.bing.com/translator/)ï¼šLevel 1
- [ç«å±±ç¿»è¯‘](https://translate.volcengine.com/)ï¼šLevel 1
- [æœ‰é“ç¿»è¯‘](https://fanyi.youdao.com/)ï¼šLevel 2ï¼ˆæ¥å£è¢«åŠ å¯†ï¼Œæ²¡æ³•è½»æ˜“ç ´è§£ï¼‰
  - `salt` éšæœºæ•°ï¼šæ—¶é—´ + rand ç”Ÿæˆ
  - `sign`ï¼šmd5 åŠ å¯†è®¤è¯
- [è°·æ­Œç¿»è¯‘](https://translate.google.cn/)ï¼šLevel 3
  - [ç™¾åº¦ç¿»è¯‘æ¥å£ç ´è§£](https://www.jianshu.com/p/38a65d8d3e80)
- [ç™¾åº¦ç¿»è¯‘](https://fanyi.baidu.com/)ï¼šLevel 3
  - [è°·æ­Œç¿»è¯‘æ¥å£ç ´è§£](https://www.52pojie.cn/thread-707169-1-1.html)

â­åä¸‰ç§ç¿»è¯‘å¹³å°æƒ³è¦å…è´¹ä½¿ç”¨çš„è¯éƒ½éœ€è¦ç ´è§£ï¼Œæˆ–è€…ä½ å¯ä»¥æ°ªé‡‘å»ç”³è¯·å¯¹åº”ç¿»è¯‘å¹³å°çš„ API æ¥å£ï¼Œæ¯”è¾ƒç¨³å®šã€‚

### 4.3 å¹¶è¡Œè¯·æ±‚ç¿»è¯‘

å…³é”®ä»£ç ï¼š

```go
func main() {
    // ...
    var wg sync.WaitGroup
    wg.Add(2)
    go func() {
        queryYouDao(word)
        wg.Done()
    }()
    go func() {
        queryCaiYun(word)
        wg.Done()
    }()
    wg.Wait()
}
```

æœ€ç»ˆä»£ç ï¼š

![](https://cdn.jsdelivr.net/gh/Wu-yikun/OSS/PicGo/202501202256440.jpeg)
