---
title: 模运算
description: 模运算的世界：当加减乘除遇上取模（模运算恒等式/费马小定理）
publishDate: 2025-04-28
tags: [leetcode]
heroImage: { src: ../_img/202501222250241.jpeg }
language: Chinese
comment: true
draft: false
---

## ✅ 模运算

✅ **更多细节**：[0x3f 分享丨模运算的世界：当加减乘除遇上取模（模运算恒等式/费马小定理）](https://leetcode.cn/circle/discuss/mDfnkW/)

代码实现时，加减乘除如下：

```cpp
MOD = 1_000_000_007

// 加‼️
(a + b) % MOD = ((a % MOD) + (b % MOD)) % MOD

// 减
(a - b + MOD) % MOD

// 把任意整数 a 取模到 [0,MOD-1] 中，无论 a 是正是负
(a % MOD + MOD) % MOD

// 乘（注意使用 64 位整数）‼️
a * b % MOD = ((a % MOD) * (b % MOD)) % MOD

// 多个数相乘，要步步取模，防止溢出
a * b % MOD * c % MOD

// 除（MOD 是质数且 b 不是 MOD 的倍数）
a * qpow(b, MOD - 2, MOD) % MOD
```

其中 `qpow` 为**快速幂**，具体请看[【图解】一张图秒懂快速幂](https://leetcode.cn/problems/powx-n/solution/tu-jie-yi-zhang-tu-miao-dong-kuai-su-mi-ykp3i/)。

> 注：Python 内置快速幂函数 `pow(x, y, m)` 用于计算 $x^y\ mod\ m$。特别地，除法也可以写成 `a * pow(b, -1, MOD) % MOD`

总之，如果发现解答错误，可以检查下代码，看看是不是哪里漏掉取模了。

## 取模练习题｜[3379. 转换数组](https://leetcode.cn/problems/transformed-array/)

给你一个整数数组 `nums`，它表示一个循环数组。请你遵循以下规则创建一个大小 **相同** 的新数组 `result` ：

对于每个下标 `i`（其中 `0 <= i < nums.length`），独立执行以下操作：

- 如果 `nums[i] > 0`：从下标 `i` 开始，向 **右** 移动 `nums[i]` 步，在循环数组中落脚的下标对应的值赋给 `result[i]`。
- 如果 `nums[i] < 0`：从下标 `i` 开始，向 **左** 移动 `abs(nums[i])` 步，在循环数组中落脚的下标对应的值赋给 `result[i]`。
- 如果 `nums[i] == 0`：将 `nums[i]` 的值赋给 `result[i]`。

返回新数组 `result`。

**注意：**由于 `nums` 是循环数组，向右移动超过最后一个元素时将回到开头，向左移动超过第一个元素时将回到末尾。

**示例 1：**

**输入：** nums = [3,-2,1,1]

**输出：** [1,1,1,3]

**解释：**

- 对于 `nums[0]` 等于 3，向右移动 3 步到 `nums[3]`，因此 `result[0]` 为 1。
- 对于 `nums[1]` 等于 -2，向左移动 2 步到 `nums[3]`，因此 `result[1]` 为 1。
- 对于 `nums[2]` 等于 1，向右移动 1 步到 `nums[3]`，因此 `result[2]` 为 1。
- 对于 `nums[3]` 等于 1，向右移动 1 步到 `nums[0]`，因此 `result[3]` 为 3。

```cpp
class Solution {
public:
    vector<int> constructTransformedArray(vector<int>& nums) {
        // 由于数组是循环数组，把下标对 n 取模
        int n = nums.size();
        vector<int> result(n);
        for (int i = 0; i < n; i++) {
            result[i] = nums[((i + nums[i]) % n + n) % n];
        }
        return result;
    }
};
```
